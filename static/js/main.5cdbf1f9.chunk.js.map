{"version":3,"sources":["includes/constants.js","includes/history.js","includes/common.js","DanmarkTesten.js","index.js"],"names":["STATE_INITIAL","given_answers","step","history","STATE_TEST_STARTED","historyRecord","instance","score","calcScore","historyWithScore","Object","objectSpread","isDebugging","property","console","group","log","groupEnd","setState","toConsumableArray","state","concat","historyGoBack","pop","formerHistoryElement","length","historyElementWithoutScore","objectWithoutProperties","jsonUrl","quiz","axios","require","FadeTransition","props","react_default","a","createElement","react_transition_group","assign","in","exit","timeout","className","children","Loading","DanmarkTesten_FadeTransition","TestIntro","renderHTML","intro","onClick","start","TestStep","info","answered","answers_for_this_question","answers","map","answer_id","question","text","p","i","key","answer","includes","bind","extra","Question","recordAnswerAndStep","add_answer","del_answers","Result","result","resultClass","html","Status","steps","count","classes","DanmarkTesten","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","startTest","assertThisInitialized","filter","e","push","res","next_step","json","questions","deps","depends","met_deps","forEach","dep","operator","findScores","scores","first_answer","Array","isArray","prelim_answers","q","sub","reduce","sum","getResult","results","up_to","goBack","get","then","data","catch","warn","status_step","Component","ReactDOM","render","src_DanmarkTesten","document","getElementById"],"mappings":"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","file":"static/js/main.5cdbf1f9.chunk.js","sourcesContent":["export const STATE_INITIAL = {\n  given_answers: [],\n  step: 0,\n  history: []\n}\n\nexport const STATE_TEST_STARTED = {\n  given_answers: [],\n  step: 1\n}\n\nexport const ANIMATION_DURATION = 900\n","import { STATE_TEST_STARTED } from './constants'\n\nexport const historyRecord = (instance, history) => {\n  const score = instance.calcScore(history.given_answers)\n  // Add current score to history for debugging.\n  const historyWithScore = { ...history, ...{ score } }\n\n  if (instance.isDebugging()) {\n    console.group('historyRecord')\n    for (const property in historyWithScore) {\n      console.log(property, historyWithScore[property])\n    }\n    console.groupEnd('historyRecord')\n  }\n\n  // \"Record actions\" by adding element to history.\n  instance.setState({ history: [...instance.state.history, historyWithScore] })\n}\n\nexport const historyGoBack = (instance) => {\n  let history = [...instance.state.history]\n  // Skip last entry because we go back in time.\n  history.pop()\n  // If history is totally emptied\n  // make sure that its set to test start (step 1).\n  history = history.length ? history : STATE_TEST_STARTED\n  // Get last entry from history (which was the previous user choice).\n  const formerHistoryElement = history[history.length - 1]\n\n  if (instance.isDebugging()) {\n    console.group('historyGoBack')\n    for (const property in formerHistoryElement) {\n      console.log(property, formerHistoryElement[property])\n    }\n    console.groupEnd('historyGoBack')\n  }\n\n  // Delete score from state object.\n  // We dont want to set it in state\n  // since application handles that in calcScore().\n  const { score, ...historyElementWithoutScore } = formerHistoryElement\n\n  // Rewind both history and state to previous step.\n  instance.setState({ ...{ history }, ...historyElementWithoutScore })\n}\n","export const jsonUrl = (quiz) => {\n  switch (process.env.NODE_ENV) {\n    case 'development':\n      return `http://localhost:3000/${quiz}.json`\n\n    case 'production':\n      return `/api/${quiz}`\n  }\n}\n","import React, { Component, PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { TransitionGroup, Transition } from 'react-transition-group';\nimport renderHTML from 'react-render-html';\nimport './main.css';\nimport { historyRecord, historyGoBack } from './includes/history';\nimport { jsonUrl } from './includes/common';\nimport { STATE_INITIAL, STATE_TEST_STARTED, ANIMATION_DURATION } from './includes/constants'\n\nvar axios = require('axios');\n\n//------------------- FadeTransition ------------------------------\nconst FadeTransition = (props) => (\n\t<Transition\n\t\tin={true}\n\t\texit={true}\n\t\t{...props}\n\t\ttimeout={ANIMATION_DURATION}\n\t>\n\t\t{(state) => {\n\t\t\tconst className = `transition ${state}`\n\t\t\treturn (\n\t\t\t\t<div className={className}>\n\t\t\t\t\t{props.children}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}}\n\t</Transition>\n);\nFadeTransition.propTypes = {\n};\n\n//------------------- Loading ------------------------------\n\nfunction Loading(props) {\n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t\t<p>Henter data...</p>\n\t\t</FadeTransition>\n\t);\n}\nLoading.propTypes = {\n};\n\n//------------------- TestIntro ------------------------------\n\nfunction TestIntro(props) {\n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t<div className=\"test-wrapper--intro\">\n\t\t\t{renderHTML(props.intro)}\n\t\t\t<button onClick={props.start}>Start testen</button>\n\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\nTestIntro.propTypes = {\n\tintro: PropTypes.string.isRequired,\n\tstart: PropTypes.func.isRequired\n};\n\n//------------------- TestStep ------------------------------\n\nfunction TestStep(props) {\n\tvar info = props.info;\n\tvar onClick = props.onClick;\n\tvar answered = props.answered;\n\tvar answers_for_this_question = info.answers.map((a) => a.answer_id);\n\n\treturn (\n\t\t<div className=\"test-wrapper--step\">\n\t\t\t<h2>{info.question}</h2>\n\t\t\t{info.text && info.text.map(\n\t\t\t\t(p,i) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<p key={i}>{p}</p>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t)}\n\t\t\t{info.answers && info.answers.map(\n\t\t\t\t(answer) => {\n\t\t\t\t\tvar className;\n\t\t\t\t\tif (answered.includes(answer.answer_id)) className = \"active\";\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={answer.answer_id}>\n\t\t\t\t\t\t  <button className={className} onClick={onClick.bind(null,answer.answer_id, answers_for_this_question)}>{answer.text}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t)}\n\t\t\t{info.extra && renderHTML(info.extra)}\n\t\t</div>\n\t);\n}\nTestStep.propTypes = {\n\tinfo: PropTypes.object.isRequired,\n\tonClick: PropTypes.func.isRequired,\n\tanswered: PropTypes.array.isRequired\n};\n\n//------------------- Question ------------------------------\n\nfunction Question(props) {\n\tvar question      = props.question;\n\tvar given_answers = props.given_answers;\n\tvar recordAnswerAndStep = props.recordAnswerAndStep;\n\tlet onClick       = (add_answer, del_answers) => {\n\t\trecordAnswerAndStep(add_answer, del_answers);\n\t};\n\n\treturn (\n        <FadeTransition {...props}>\n\t\t<div className=\"Question\">\n\t\t  <TestStep info={question} onClick={onClick} answered={given_answers}/>\n\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\n\nQuestion.propTypes = {\n\tquestion: PropTypes.object.isRequired,\n\tgiven_answers: PropTypes.array.isRequired,\n\trecordAnswerAndStep: PropTypes.func.isRequired\n};\n\n//------------------- Result ------------------------------\n\nfunction Result(props) {\n\tconst { result } = props;\n\tconst resultClass = `result result__group--${result.group}`;\n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t\t<div className=\"test-wrapper--result\">\n\t\t\t\t<div className={resultClass}>\n\t\t\t\t\t{renderHTML(result.html)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\nResult.propTypes = {\n\tresult:  PropTypes.object.isRequired\n};\n\n//------------------- Status ------------------------------\n\nfunction Status(props) {\n\tvar steps = [];\n\tfor (let i = 0; i < props.count; ++i) {\n\t\tsteps[i] = \"\";\n\t}\n\tfor (let i = 0; i < props.step-1; ++i) {\n\t\tsteps[i] += 'seen ';\n\t}\n\tsteps[props.step  - 1] += 'active ';\n\tsteps[props.count - 1] += 'final ';\n\treturn (\n\t\t<ul className=\"test-wrapper--status\">\n\t\t\t{steps.map(function(classes,i) {\n\t\t\t\treturn (<li key={i} className={classes}><i></i></li>);\n\t\t\t})}\n\t\t</ul>\n\t);\n}\nStatus.propTypes = {\n\tstep:  PropTypes.number.isRequired,\n\tcount: PropTypes.number.isRequired\n};\n\n//------------------- DanmarkTesten ------------------------------\n\nclass DanmarkTesten extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tif (props.json) { // test inject\n\t\t\tthis.state = {\n\t\t\t\t...STATE_INITIAL,\n\t\t\t\t...{\n\t\t\t\t\tsteps: props.json.questions[props.json.questions.length - 1].step + 1,\n\t\t\t\t\tcount: props.json.questions.length + 1,\n\t\t\t\t\tjson: props.json,\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tthis.state = STATE_INITIAL;\n\n\t\t\taxios.get(jsonUrl(this.props.quiz)).then((res) => {\n\t\t\t\tvar json = res.data;\n\t\t\t\tthis.setState(() => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tsteps: json.questions[json.questions.length - 1].step+1,\n\t\t\t\t\t\tcount: json.questions.length + 1,\n\t\t\t\t\t\tjson:  json\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}).catch((e) => {\n\t\t\t\tif (console.warn) console.warn(e);\n\t\t\t});\n\n\t\t}\n\t}\n\n\tstartTest = () => {\n\t\tthis.setState(() => {\n\t\t\treturn { step: 1 };\n\t\t});\n\t\thistoryRecord(this, STATE_TEST_STARTED);\n\t};\n\n\trecordAnswerAndStep = (answer, del_answers) => {\n\n\t\tlet given_answers = this.state.given_answers.filter((e) => !del_answers.includes(e));\n\n\t\tgiven_answers.push(answer);\n\n\t\tlet res = { given_answers };\n\n\t\tif (this.calcScore(given_answers) < 0) {\n\t\t\tres.step = this.state.count;\n\n\t\t\thistoryRecord(this, {\n\t\t\t\tstep: res.step,\n\t\t\t\tgiven_answers: res.given_answers\n\t\t\t});\n\t\t\tthis.setState(res);\n\t\t\treturn;\n\t\t}\n\n\t\tlet step = 0;\n\n\t\tlet next_step = this.state.step + 1;\n\t\tif (next_step >= this.state.count) {\n\t\t\tstep = this.state.count;\n\t\t}\n\n\t\twhile(!step && next_step < this.state.count) {\n\t\t\tlet question = this.state.json.questions[next_step-1];\n\n\t\t\tlet deps = question.depends || [];\n\t\t\tif (!deps.length) {\n\t\t\t\tstep = next_step;\n\t\t\t} else {\n\t\t\t    let met_deps = 0;\n\t\t\t    deps.forEach((dep) => {\n\t\t\t\t    given_answers.forEach((answer) => {\n\t\t\t\t\t    if (dep === answer) {\n\t\t\t\t\t\t    ++met_deps;\n\t\t\t\t\t    }\n\t\t\t\t    });\n\t\t\t    });\n\n\t\t\t    if (0 < met_deps) {\n\t\t\t    \tif (question.operator && question.operator === 'or') {\n\t\t\t\t\t\tstep = next_step;\n\t\t\t    \t}\n\t\t\t    \tif (met_deps === deps.length) {\n\t\t\t\t\t\tstep = next_step;\n\t\t\t    \t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tnext_step++;\n\t\t}\n\n\t\tif (!step || step >= this.state.count) {\n\t\t\tstep = this.state.count;\n\t\t}\n\n\t\tres.step = step;\n\n\t\thistoryRecord(this, {\n\t\t\tstep: res.step,\n\t\t\tgiven_answers: res.given_answers\n\t\t});\n\t\tthis.setState(res);\n\t};\n\n\tfindScores = (scores, answers, first_answer) => {\n\t\tfor (let i = 0; i < answers.length; ++i) {\n\t\t\tlet a = answers[i];\n\t\t\tscores[ a.answer_id ] = Array.isArray(a.score) ? a.score[ first_answer ] : a.score;\n\t\t}\n\t\treturn scores;\n\t};\n\n\tcalcScore = (prelim_answers) => {\n\t\tif (!this.state.json) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet given_answers = prelim_answers || this.state.given_answers;\n\t\tlet questions = this.state.json.questions;\n\t\tlet scores = [];\n\t\tlet first_answer = given_answers[0] || 0;\n\t\tfor (let i = 0; i < questions.length; ++i) {\n\t\t\tlet q = questions[i];\n\t\t\tthis.findScores(scores, q.answers, first_answer);\n\t\t\tif (q.sub) {\n                q.sub.forEach((sub) => {\n\t\t\t\t    this.findScores(scores, sub.answers, first_answer);\n                });\n\t\t\t}\n\t\t}\n\t\tlet score = given_answers.reduce((sum, i) => sum + scores[i], 0);\n\t\treturn score;\n\t};\n\n\tgetResult = () => {\n\t\tvar score = this.calcScore();\n\t\tvar results = this.state.json.results;\n\t\tfor (var i = 0; i < results.length; ++i) {\n\t\t\tvar res = results[i];\n\t\t\tif (   (res.up_to && score < res.up_to)\n\t\t\t\t|| (res.in    && res.in.includes(score))\n\t\t\t\t|| (!res.in   && !res.up_to))\n\t\t\t{\n\t\t\t\treturn res;\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t};\n\n\tgoBack = () => historyGoBack(this);\n\n\tisDebugging = () => {\n\t\tif (process.env.NODE_ENV === 'production') {\n\t\t\treturn true\n\t\t}\n\n\t\treturn this.state.json !== undefined && this.state.json.debug\n\t}\n\n\trender() {\n\t\tlet status_step = 0;\n\t\tif (this.state.step)\n\t\t\tstatus_step = (this.state.step >= this.state.count) ?\n\t\t\t\tthis.state.steps :\n\t\t\t\tthis.state.json.questions[this.state.step-1].step;\n\n\t\tif (this.isDebugging()) {\n\t\t\tconsole.group('Current state');\n\t\t\tconsole.log('History', this.state.history);\n\t\t\tconsole.log('Current score', this.calcScore());\n\t\t\tconsole.log('State', this.state);\n\t\t\tconsole.groupEnd('Current state');\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"test-wrapper\">\n\t\t\t\t{1 < this.state.step && <a className=\"back-button\" onClick={this.goBack}>Tilbage</a>}\n\t\t\t\t<div className=\"test-wrapper-body\">\n\t\t\t\t\t<TransitionGroup>\n\t\t\t\t\t{0 === this.state.step && !this.state.json &&\n\t\t\t\t\t\t<Loading key=\"loading\" />\n\t\t\t\t\t}\n\t\t\t\t\t{0 === this.state.step && this.state.json &&\n\t\t\t\t\t\t<TestIntro\n\t\t\t\t\t\t\tkey=\"testintro\"\n\t\t\t\t\t\t\tintro={this.state.json.intro}\n\t\t\t\t\t\t\tstart={this.startTest}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step && this.state.step >= this.state.count &&\n\t\t\t\t\t\t<Result\n\t\t\t\t\t\t\tkey=\"result\"\n\t\t\t\t\t\t\tresult={this.getResult()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step && this.state.step < this.state.count &&\n\t\t\t\t\t\t<Question\n\t\t\t\t\t\t\tkey={\"question\" + this.state.step}\n\t\t\t\t\t\t\tquestion={this.state.json.questions[this.state.step - 1]}\n\t\t\t\t\t\t\tgiven_answers={this.state.given_answers}\n\t\t\t\t\t\t\trecordAnswerAndStep={this.recordAnswerAndStep}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step &&\n\t\t\t\t\t\t<Status\n\t\t\t\t\t\t\tkey=\"status\"\n\t\t\t\t\t\t\tstep={status_step}\n\t\t\t\t\t\t\tcount={this.state.steps}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t</TransitionGroup>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nDanmarkTesten.propTypes = {\n\tquiz: PropTypes.string,\n\tjson: PropTypes.object\n};\n\nexport default DanmarkTesten;\n","import 'react-app-polyfill/ie11'; // For IE 11 support\nimport 'core-js/es7/array'\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport DanmarkTesten from './DanmarkTesten';\n\nReactDOM.render(<DanmarkTesten quiz=\"danmark-testen\" />, document.getElementById('danmark-testen'));\n//ReactDOM.render(<DanmarkTesten quiz=\"boerne-testen\" />, document.getElementById('boerne-testen'));\n"],"sourceRoot":""}