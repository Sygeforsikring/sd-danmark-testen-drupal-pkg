(this["webpackJsonpdanmark-testen"]=this["webpackJsonpdanmark-testen"]||[]).push([[0],{127:function(e,t,n){e.exports=n(256)},218:function(e,t){},220:function(e,t){},238:function(e,t,n){},256:function(e,t,n){"use strict";n.r(t);n(82),n(132),n(136),n(137),n(139),n(140),n(141),n(142),n(143),n(144),n(96),n(151),n(152),n(153),n(158),n(159),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(171),n(172),n(173),n(102),n(175);var s=n(0),a=n.n(s),r=n(125),o=n.n(r),c=n(47),i=n(31),u=n(32),l=n(34),p=n(33),h=n(35),f=n(11),g=n(22),d=n.n(g),m=n(46),v=(n(238),n(126)),b=n(81),w={given_answers:[],step:0,history:[]},j={given_answers:[],step:1},E=function(e,t){var n=e.calcScore(t.given_answers),s=Object(c.a)({},t,{score:n});if(e.isDebugging()){for(var a in console.group("historyRecord"),s)console.log(a,s[a]);console.groupEnd("historyRecord")}e.setState({history:[].concat(Object(b.a)(e.state.history),[s])})},k=function(e,t,n,s){if("undefined"!==typeof _sz)return"function"===typeof _sz.push&&(_sz.push(["event",t,n,s]),window.console.log("Siteimprove: ".concat(s))),e},O=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=function(){k(null,"danmark testen","Load Age step","User continued to age step")},n.handleChange=function(e){n.setState({age:parseInt(e.target.value),showMessage:!1})},n.handleNext=function(e){var t=n.state.age;if(t<16||t>59)return n.setState({showMessage:!0}),void k(null,"danmark testen","Age input error","User gets an error on enter age step");var s=Object(m.find)(n.state.intervals,(function(e){return t>=e.from&&t<=e.to}));n.props.nextStep(s.id,n.state.answer_ids)};var s=[];e.answers.forEach((function(e){var t=e.text.split("-");s.push({from:t[0],to:t[1],id:e.answer_id})}));var a=e.answers.map((function(e){return e.answer_id}));return n.state={age:"",intervals:s,answer_ids:a,showMessage:!1},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.showMessage?"next disabled":"next";return a.a.createElement("div",{className:"age-step"},a.a.createElement("label",{htmlFor:"age"},"Indtast alder:"),a.a.createElement("input",{name:"age",type:"number",value:this.state.age,onChange:this.handleChange}),a.a.createElement("button",{className:e,onClick:this.handleNext},"N\xe6ste"),this.state.showMessage&&this.props.message&&a.a.createElement("div",{className:"message"},d()(this.props.message)))}}]),t}(s.Component),y=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=function(){k(null,"danmark testen","Load resultpage","User loads resultpage for group: ".concat(n.props.group)),n.ref.current.querySelectorAll("a").forEach((function(e){return e.addEventListener("click",n.onClick,!1)}))},n.componentWillUnmount=function(){n.ref.current.querySelectorAll("a").forEach((function(e){return e.removeEventlistner("click",n.onClick,!1)}))},n.onClick=function(e){var t=n.props.group,s=e.target.innerText;k(null,"danmark testen","Click ".concat(s),"User clicked ".concat(s," from resultpage for group: ").concat(t))},n.ref=a.a.createRef(),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:this.props.className,ref:this.ref},d()(this.props.markup))}}]),t}(s.Component),_=n(239),S=function(e){var t=a.a.Children.map(e.children,(function(e){return e.props.className?a.a.cloneElement(e,{className:e.props.className+" fade-in"}):e}));return a.a.createElement("div",null,t)};function N(e){return a.a.createElement(S,e,a.a.createElement("p",null,"Henter data..."))}function C(e){return a.a.createElement(S,e,a.a.createElement("div",{className:"test-wrapper--intro"},a.a.createElement("div",{className:"test-wrapper--intro-illustration"}),d()(e.intro),a.a.createElement("button",{onClick:e.start},"Start testen")))}function q(e){var t=e.step,n=e.info,s=e.onClick,r=e.answered,o=r.length>0?r[0]:null,c=Object(m.filter)(n.answers,(function(e){return void 0===e.age||null===e.age||Object(m.includes)(e.age,o)}),o),i=c.map((function(e){return e.answer_id}));return a.a.createElement("div",{className:"test-wrapper--step"},a.a.createElement("h2",null,n.question),n.text&&d()(n.text),1===t&&a.a.createElement(O,{answers:n.answers,nextStep:s,message:n.message}),t>1&&c.map((function(e){var t;return r.includes(e.answer_id)&&(t="active"),a.a.createElement("div",{key:e.answer_id},a.a.createElement("button",{className:t,onClick:s.bind(null,e.answer_id,i)},e.text))})),n.extra&&d()(n.extra))}function x(e){var t=e.step,n=e.question,s=e.given_answers,r=e.recordAnswerAndStep;return a.a.createElement(S,e,a.a.createElement("div",{className:"Question"},a.a.createElement(q,{step:t,info:n,onClick:function(e,t){r(e,t)},answered:s})))}function A(e){var t=e.result,n="result result__group--".concat(t.group);return a.a.createElement(S,e,a.a.createElement("div",{className:"test-wrapper--result"},a.a.createElement(y,{className:n,markup:t.html,group:t.group})))}function M(e){for(var t=[],n=0;n<e.count;++n)t[n]="";for(var s=0;s<e.step-1;++s)t[s]+="seen ";return t[e.step-1]+="active ",t[e.count-1]+="final ",a.a.createElement("ul",{className:"test-wrapper--status"},t.map((function(e,t){return a.a.createElement("li",{key:t,className:e},a.a.createElement("i",null))})))}var D=function(e){function t(e){var n,s;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).startTest=function(){n.setState((function(){return{step:1}})),E(Object(f.a)(Object(f.a)(n)),j)},n.recordAnswerAndStep=function(e,t){var s=n.state.given_answers.filter((function(e){return!t.includes(e)}));s.push(e);var a={given_answers:s};if(n.calcScore(s)<0)return a.step=n.state.count,E(Object(f.a)(Object(f.a)(n)),{step:a.step,given_answers:a.given_answers}),void n.setState(a);var r=0,o=n.state.step+1;for(o>=n.state.count&&(r=n.state.count);!r&&o<n.state.count;){var c=n.state.json.questions[o-1],i=c.depends||[];i.length?function(){var e=0;i.forEach((function(t){s.forEach((function(n){t===n&&++e}))})),0<e&&(c.operator&&"or"===c.operator&&(r=o),e===i.length&&(r=o))}():r=o,o++}(!r||r>=n.state.count)&&(r=n.state.count),a.step=r,E(Object(f.a)(Object(f.a)(n)),{step:a.step,given_answers:a.given_answers}),n.setState(a)},n.findScores=function(e,t,n){for(var s=0;s<t.length;++s){var a=t[s];e[a.answer_id]=Array.isArray(a.score)?a.score[n]:a.score}return e},n.calcScore=function(e){if(!n.state.json)return 0;for(var t=e||n.state.given_answers,s=n.state.json.questions,a=[],r=t[0]||0,o=0;o<s.length;++o){var c=s[o];n.findScores(a,c.answers,r),c.sub&&c.sub.forEach((function(e){n.findScores(a,e.answers,r)}))}return t.reduce((function(e,t){return e+a[t]}),0)},n.getResult=function(){for(var e=n.calcScore(),t=n.state.json.results,s=0;s<t.length;++s){var a=t[s];if(a.up_to&&e<a.up_to||a.in&&a.in.includes(e)||!a.in&&!a.up_to)return a}return{}},n.goBack=function(){return function(e){var t=Object(b.a)(e.state.history);t.pop();var n=(t=t.length?t:j)[t.length-1];if(e.isDebugging()){for(var s in console.group("historyGoBack"),n)console.log(s,n[s]);console.groupEnd("historyGoBack")}n.score;var a=Object(v.a)(n,["score"]);e.setState(Object(c.a)({},{history:t},a))}(Object(f.a)(Object(f.a)(n)))},n.isDebugging=function(){return void 0!==n.state.json&&n.state.json.debug},e.json?n.state=Object(c.a)({},w,{steps:e.json.questions[e.json.questions.length-1].step+1,count:e.json.questions.length+1,json:e.json}):(n.state=w,_.get((s=n.props.quiz,"/api/globals/".concat(s))).then((function(e){var t=e.data.data;n.setState((function(){return{steps:t.questions[t.questions.length-1].step+1,count:t.questions.length+1,json:t}}))})).catch((function(e){console.warn&&console.warn(e)}))),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=0;return this.state.step&&(e=this.state.step>=this.state.count?this.state.steps:this.state.json.questions[this.state.step-1].step),this.isDebugging()&&(console.group("Current state"),console.log("History",this.state.history),console.log("Current score",this.calcScore()),console.log("State",this.state),console.groupEnd("Current state")),a.a.createElement("div",{className:"test-wrapper"},1<this.state.step&&this.state.step<this.state.count&&a.a.createElement("div",{className:"button-back",onClick:this.goBack},"Tilbage"),a.a.createElement("div",{className:"test-wrapper-body"},0===this.state.step&&!this.state.json&&a.a.createElement(N,{key:"loading"}),0===this.state.step&&this.state.json&&a.a.createElement(C,{key:"testintro",intro:this.state.json.intro,start:this.startTest}),0<this.state.step&&this.state.step>=this.state.count&&a.a.createElement(A,{key:"result",result:this.getResult()}),0<this.state.step&&this.state.step<this.state.count&&a.a.createElement(x,{step:this.state.step,key:"question"+this.state.step,question:this.state.json.questions[this.state.step-1],given_answers:this.state.given_answers,recordAnswerAndStep:this.recordAnswerAndStep}),0<this.state.step&&a.a.createElement(M,{key:"status",step:e,count:this.state.steps})))}}]),t}(s.Component);o.a.render(a.a.createElement(D,{quiz:"danmark-testen"}),document.getElementById("danmark-testen"))}},[[127,1,2]]]);
//# sourceMappingURL=main.fe505bda.chunk.js.map