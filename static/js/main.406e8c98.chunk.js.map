{"version":3,"sources":["includes/constants.js","includes/history.js","includes/common.js","AgeStep.js","DanmarkTesten.js","index.js"],"names":["STATE_INITIAL","given_answers","step","history","STATE_TEST_STARTED","historyRecord","instance","score","calcScore","historyWithScore","Object","objectSpread","isDebugging","property","console","group","log","groupEnd","setState","toConsumableArray","state","concat","historyGoBack","pop","formerHistoryElement","length","historyElementWithoutScore","objectWithoutProperties","jsonUrl","quiz","AgeStep","_Component","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleChange","event","age","parseInt","target","value","showMessage","handleNext","answer","find","intervals","element","from","to","nextStep","id","answer_ids","answers","forEach","res","text","split","push","answer_id","map","a","inherits","createClass","key","buttonClass","react_default","createElement","className","htmlFor","name","type","onChange","onClick","message","renderHTML","Component","axios","require","FadeTransition","extendedChildren","React","Children","children","child","cloneElement","Loading","DanmarkTesten_FadeTransition","TestIntro","intro","start","TestStep","info","answered","filteredAnswers","filter","undefined","includes","answers_for_this_question","question","AgeStep_AgeStep","bind","extra","Question","recordAnswerAndStep","add_answer","del_answers","Result","result","resultClass","html","Status","steps","i","count","classes","DanmarkTesten","startTest","assertThisInitialized","e","next_step","json","questions","deps","depends","met_deps","dep","operator","findScores","scores","first_answer","Array","isArray","prelim_answers","q","sub","reduce","sum","getResult","results","up_to","in","goBack","debug","get","then","data","catch","warn","status_step","ReactDOM","render","src_DanmarkTesten","document","getElementById"],"mappings":"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","file":"static/js/main.406e8c98.chunk.js","sourcesContent":["export const STATE_INITIAL = {\n  given_answers: [],\n  step: 0,\n  history: []\n}\n\nexport const STATE_TEST_STARTED = {\n  given_answers: [],\n  step: 1\n}\n","import { STATE_TEST_STARTED } from './constants'\n\nexport const historyRecord = (instance, history) => {\n  const score = instance.calcScore(history.given_answers)\n  // Add current score to history for debugging.\n  const historyWithScore = { ...history, ...{ score } }\n\n  if (instance.isDebugging()) {\n    console.group('historyRecord')\n    for (const property in historyWithScore) {\n      console.log(property, historyWithScore[property])\n    }\n    console.groupEnd('historyRecord')\n  }\n\n  // \"Record actions\" by adding element to history.\n  instance.setState({ history: [...instance.state.history, historyWithScore] })\n}\n\nexport const historyGoBack = (instance) => {\n  let history = [...instance.state.history]\n  // Skip last entry because we go back in time.\n  history.pop()\n  // If history is totally emptied\n  // make sure that its set to test start (step 1).\n  history = history.length ? history : STATE_TEST_STARTED\n  // Get last entry from history (which was the previous user choice).\n  const formerHistoryElement = history[history.length - 1]\n\n  if (instance.isDebugging()) {\n    console.group('historyGoBack')\n    for (const property in formerHistoryElement) {\n      console.log(property, formerHistoryElement[property])\n    }\n    console.groupEnd('historyGoBack')\n  }\n\n  // Delete score from state object.\n  // We dont want to set it in state\n  // since application handles that in calcScore().\n  const { score, ...historyElementWithoutScore } = formerHistoryElement\n\n  // Rewind both history and state to previous step.\n  instance.setState({ ...{ history }, ...historyElementWithoutScore })\n}\n","export const jsonUrl = (quiz) => {\n  switch (process.env.NODE_ENV) {\n    case 'development':\n      return `http://localhost:3000/${quiz}.json`\n\n    case 'production':\n    default:\n      return `/api/${quiz}`\n  }\n}\n","import React, { Component } from 'react';\nimport renderHTML from 'react-render-html';\nimport { find } from 'lodash';\n\n//------------------- AgeStep ------------------------------\nexport class AgeStep extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n        let intervals = [];\n        props.answers.forEach(answer => {\n            let res = answer.text.split(\"-\");\n            intervals.push({\n                from: res[0],\n                to: res[1],\n                id: answer.answer_id\n            });\n        });\n        const answer_ids = props.answers.map((a) => a.answer_id);\n        this.state = { age: '', intervals, answer_ids, showMessage: false};\n\t}\n\n    handleChange = (event) => {\n        this.setState({\n            age: parseInt(event.target.value),\n            showMessage: false\n        });\n    };\n\n    handleNext = (event) => {\n        const age = this.state.age;\n        if (age < 16 || age > 59) {\n            this.setState({showMessage: true});\n            return;\n        }\n\n        let answer = find(this.state.intervals, function(element) {\n            return  age >= element.from && age <= element.to;\n        });\n\n        this.props.nextStep(answer.id, this.state.answer_ids);\n\n     };\n\n    render() {\n        const buttonClass = this.state.showMessage ? 'next disabled' : 'next';\n        return (\n            <div className=\"age-step\">\n                <label htmlFor=\"age\">Indtast alder:</label>\n                <input name=\"age\" type=\"number\" value={this.state.age} onChange={this.handleChange} />\n                <button className={buttonClass} onClick={this.handleNext}>Næste</button>\n                { this.state.showMessage && this.props.message &&\n                    <div className=\"message\">\n                    { renderHTML(this.props.message) }\n                    </div>\n                }\n            </div>\n        );\n\t}\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport renderHTML from 'react-render-html';\nimport {filter, includes} from 'lodash';\nimport './main.css';\nimport { historyRecord, historyGoBack } from './includes/history';\nimport { jsonUrl } from './includes/common';\nimport { STATE_INITIAL, STATE_TEST_STARTED } from './includes/constants'\nimport { AgeStep } from './AgeStep';\n\nvar axios = require('axios');\n\n//------------------- FadeTransition ------------------------------\nconst FadeTransition = (props) => {\n\tconst extendedChildren = React.Children.map(props.children, (child) => {\n    return child.props.className ? React.cloneElement(\n      child,\n      {\n        className: child.props.className + ' fade-in',\n      }\n    ) : child;\n  });\n\n\treturn (\n\t\t<div>\n\t\t\t{extendedChildren}\n\t\t</div>\n\t);\n}\nFadeTransition.propTypes = {\n};\n\n//------------------- Loading ------------------------------\n\nfunction Loading(props) {\n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t\t<p>Henter data...</p>\n\t\t</FadeTransition>\n\t);\n}\nLoading.propTypes = {\n};\n\n//------------------- TestIntro ------------------------------\n\nfunction TestIntro(props) {\n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t<div className=\"test-wrapper--intro\">\n\t\t\t<div className=\"test-wrapper--intro-illustration\" />\n\t\t\t{renderHTML(props.intro)}\n\t\t\t<button onClick={props.start}>Start testen</button>\n\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\nTestIntro.propTypes = {\n\tintro: PropTypes.string.isRequired,\n\tstart: PropTypes.func.isRequired\n};\n\n//------------------- TestStep ------------------------------\n\nfunction TestStep(props) {\n\tvar step = props.step;\n\tvar info = props.info;\n\tvar onClick = props.onClick;\n\tvar answered = props.answered;\n\n\tconst age = answered.length > 0 ? answered[0] : null;\n\tconst filteredAnswers = filter(info.answers, function(answer) {\n\t\treturn answer.age === undefined || answer.age === null || includes(answer.age, age);\n\t}, age);\n\n\tvar answers_for_this_question = filteredAnswers.map((a) => a.answer_id);\n\n\treturn (\n\t\t<div className=\"test-wrapper--step\">\n\t\t\t<h2>{info.question}</h2>\n\t\t\t{info.text && renderHTML(info.text)}\n\n\t\t\t{\n\t\t\t\tstep === 1 && <AgeStep answers={info.answers} nextStep={onClick} message={info.message}/>\n\t\t\t}\n\n\t\t\t{step > 1 && filteredAnswers.map(\n\t\t\t\t(answer) => {\n\t\t\t\t\tvar className;\n\t\t\t\t\tif (answered.includes(answer.answer_id)) className = \"active\";\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={answer.answer_id}>\n\t\t\t\t\t\t  <button className={className} onClick={onClick.bind(null,answer.answer_id, answers_for_this_question)}>{answer.text}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t)}\n\t\t\t{info.extra && renderHTML(info.extra)}\n\t\t</div>\n\t);\n}\nTestStep.propTypes = {\n\tinfo: PropTypes.object.isRequired,\n\tonClick: PropTypes.func.isRequired,\n\tanswered: PropTypes.array.isRequired\n};\n\n//------------------- Question ------------------------------\n\nfunction Question(props) {\n\tvar step          = props.step;\n\tvar question      = props.question;\n\tvar given_answers = props.given_answers;\n\tvar recordAnswerAndStep = props.recordAnswerAndStep;\n\tlet onClick       = (add_answer, del_answers) => {\n\t\trecordAnswerAndStep(add_answer, del_answers);\n\t};\n\n\treturn (\n    <FadeTransition {...props}>\n\t\t\t<div className=\"Question\">\n\t\t\t  <TestStep step={step} info={question} onClick={onClick} answered={given_answers}/>\n\t\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\n\nQuestion.propTypes = {\n\tquestion: PropTypes.object.isRequired,\n\tgiven_answers: PropTypes.array.isRequired,\n\trecordAnswerAndStep: PropTypes.func.isRequired,\n\tstep: PropTypes.number.isRequired\n};\n\n//------------------- Result ------------------------------\n\nfunction Result(props) {\n\tconst { result } = props;\n\tconst resultClass = `result result__group--${result.group}`;\n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t\t<div className=\"test-wrapper--result\">\n\t\t\t\t<div className={resultClass}>\n\t\t\t\t\t{renderHTML(result.html)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\nResult.propTypes = {\n\tresult:  PropTypes.object.isRequired\n};\n\n//------------------- Status ------------------------------\n\nfunction Status(props) {\n\tvar steps = [];\n\tfor (let i = 0; i < props.count; ++i) {\n\t\tsteps[i] = \"\";\n\t}\n\tfor (let i = 0; i < props.step-1; ++i) {\n\t\tsteps[i] += 'seen ';\n\t}\n\tsteps[props.step  - 1] += 'active ';\n\tsteps[props.count - 1] += 'final ';\n\treturn (\n\t\t<ul className=\"test-wrapper--status\">\n\t\t\t{steps.map(function(classes,i) {\n\t\t\t\treturn (<li key={i} className={classes}><i></i></li>);\n\t\t\t})}\n\t\t</ul>\n\t);\n}\nStatus.propTypes = {\n\tstep:  PropTypes.number.isRequired,\n\tcount: PropTypes.number.isRequired\n};\n\n//------------------- DanmarkTesten ------------------------------\n\nclass DanmarkTesten extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tif (props.json) { // test inject\n\t\t\tthis.state = {\n\t\t\t\t...STATE_INITIAL,\n\t\t\t\t...{\n\t\t\t\t\tsteps: props.json.questions[props.json.questions.length - 1].step + 1,\n\t\t\t\t\tcount: props.json.questions.length + 1,\n\t\t\t\t\tjson: props.json,\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tthis.state = STATE_INITIAL;\n\n\t\t\taxios.get(jsonUrl(this.props.quiz)).then((res) => {\n\t\t\t\tvar json = res.data;\n\t\t\t\tthis.setState(() => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tsteps: json.questions[json.questions.length - 1].step+1,\n\t\t\t\t\t\tcount: json.questions.length + 1,\n\t\t\t\t\t\tjson:  json\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}).catch((e) => {\n\t\t\t\tif (console.warn) console.warn(e);\n\t\t\t});\n\n\t\t}\n\t}\n\n\tstartTest = () => {\n\t\tthis.setState(() => {\n\t\t\treturn { step: 1 };\n\t\t});\n\t\thistoryRecord(this, STATE_TEST_STARTED);\n\t};\n\n\trecordAnswerAndStep = (answer, del_answers) => {\n\t\tlet given_answers = this.state.given_answers.filter((e) => !del_answers.includes(e));\n\n\t\tgiven_answers.push(answer);\n\n\t\tlet res = { given_answers };\n\n\t\tif (this.calcScore(given_answers) < 0) {\n\t\t\tres.step = this.state.count;\n\n\t\t\thistoryRecord(this, {\n\t\t\t\tstep: res.step,\n\t\t\t\tgiven_answers: res.given_answers\n\t\t\t});\n\t\t\tthis.setState(res);\n\t\t\treturn;\n\t\t}\n\n\t\tlet step = 0;\n\n\t\tlet next_step = this.state.step + 1;\n\t\tif (next_step >= this.state.count) {\n\t\t\tstep = this.state.count;\n\t\t}\n\n\t\twhile(!step && next_step < this.state.count) {\n\t\t\tlet question = this.state.json.questions[next_step-1];\n\n\t\t\tlet deps = question.depends || [];\n\t\t\tif (!deps.length) {\n\t\t\t\tstep = next_step;\n\t\t\t} else {\n\t\t\t    let met_deps = 0;\n\t\t\t    deps.forEach((dep) => {\n\t\t\t\t    given_answers.forEach((answer) => {\n\t\t\t\t\t    if (dep === answer) {\n\t\t\t\t\t\t    ++met_deps;\n\t\t\t\t\t    }\n\t\t\t\t    });\n\t\t\t    });\n\n\t\t\t    if (0 < met_deps) {\n\t\t\t    \tif (question.operator && question.operator === 'or') {\n\t\t\t\t\t\tstep = next_step;\n\t\t\t    \t}\n\t\t\t    \tif (met_deps === deps.length) {\n\t\t\t\t\t\tstep = next_step;\n\t\t\t    \t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tnext_step++;\n\t\t}\n\n\t\tif (!step || step >= this.state.count) {\n\t\t\tstep = this.state.count;\n\t\t}\n\n\t\tres.step = step;\n\n\t\thistoryRecord(this, {\n\t\t\tstep: res.step,\n\t\t\tgiven_answers: res.given_answers\n\t\t});\n\t\tthis.setState(res);\n\t};\n\n\tfindScores = (scores, answers, first_answer) => {\n\t\tfor (let i = 0; i < answers.length; ++i) {\n\t\t\tlet a = answers[i];\n\t\t\tscores[ a.answer_id ] = Array.isArray(a.score) ? a.score[ first_answer ] : a.score;\n\t\t}\n\t\treturn scores;\n\t};\n\n\tcalcScore = (prelim_answers) => {\n\t\tif (!this.state.json) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet given_answers = prelim_answers || this.state.given_answers;\n\t\tlet questions = this.state.json.questions;\n\t\tlet scores = [];\n\t\tlet first_answer = given_answers[0] || 0;\n\t\tfor (let i = 0; i < questions.length; ++i) {\n\t\t\tlet q = questions[i];\n\t\t\tthis.findScores(scores, q.answers, first_answer);\n\t\t\tif (q.sub) {\n                q.sub.forEach((sub) => {\n\t\t\t\t    this.findScores(scores, sub.answers, first_answer);\n                });\n\t\t\t}\n\t\t}\n\t\tlet score = given_answers.reduce((sum, i) => sum + scores[i], 0);\n\t\treturn score;\n\t};\n\n\tgetResult = () => {\n\t\tvar score = this.calcScore();\n\t\tvar results = this.state.json.results;\n\t\tfor (var i = 0; i < results.length; ++i) {\n\t\t\tvar res = results[i];\n\t\t\tif (   (res.up_to && score < res.up_to)\n\t\t\t\t|| (res.in    && res.in.includes(score))\n\t\t\t\t|| (!res.in   && !res.up_to))\n\t\t\t{\n\t\t\t\treturn res;\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t};\n\n\tgoBack = () => historyGoBack(this);\n\n\tisDebugging = () => this.state.json !== undefined && this.state.json.debug\n\n\trender() {\n\t\tlet status_step = 0;\n\t\tif (this.state.step)\n\t\t\tstatus_step = (this.state.step >= this.state.count) ?\n\t\t\t\tthis.state.steps :\n\t\t\t\tthis.state.json.questions[this.state.step-1].step;\n\n\t\tif (this.isDebugging()) {\n\t\t\tconsole.group('Current state');\n\t\t\tconsole.log('History', this.state.history);\n\t\t\tconsole.log('Current score', this.calcScore());\n\t\t\tconsole.log('State', this.state);\n\t\t\tconsole.groupEnd('Current state');\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"test-wrapper\">\n\t\t\t\t{1 < this.state.step\n\t\t\t\t\t&& <div className=\"button-back\" onClick={this.goBack}>Tilbage</div>\n\t\t\t\t}\n\t\t\t\t<div className=\"test-wrapper-body\">\n\t\t\t\t\t{0 === this.state.step && !this.state.json &&\n\t\t\t\t\t\t<Loading key=\"loading\" />\n\t\t\t\t\t}\n\t\t\t\t\t{0 === this.state.step && this.state.json &&\n\t\t\t\t\t\t<TestIntro\n\t\t\t\t\t\t\tkey=\"testintro\"\n\t\t\t\t\t\t\tintro={this.state.json.intro}\n\t\t\t\t\t\t\tstart={this.startTest}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step && this.state.step >= this.state.count &&\n\t\t\t\t\t\t<Result\n\t\t\t\t\t\t\tkey=\"result\"\n\t\t\t\t\t\t\tresult={this.getResult()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step && this.state.step < this.state.count &&\n\t\t\t\t\t\t<Question\n\t\t\t\t\t\t    step={ this.state.step }\n\t\t\t\t\t\t\tkey={\"question\" + this.state.step}\n\t\t\t\t\t\t\tquestion={this.state.json.questions[this.state.step - 1]}\n\t\t\t\t\t\t\tgiven_answers={this.state.given_answers}\n\t\t\t\t\t\t\trecordAnswerAndStep={this.recordAnswerAndStep}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step &&\n\t\t\t\t\t\t<Status\n\t\t\t\t\t\t\tkey=\"status\"\n\t\t\t\t\t\t\tstep={status_step}\n\t\t\t\t\t\t\tcount={this.state.steps}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nDanmarkTesten.propTypes = {\n\tquiz: PropTypes.string,\n\tjson: PropTypes.object\n};\n\nexport default DanmarkTesten;\n","import 'react-app-polyfill/ie11'; // For IE 11 support\nimport 'core-js/es7/array'\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport DanmarkTesten from './DanmarkTesten';\n\nReactDOM.render(<DanmarkTesten quiz=\"danmark-testen\" />, document.getElementById('danmark-testen'));\n//ReactDOM.render(<DanmarkTesten quiz=\"boerne-testen\" />, document.getElementById('boerne-testen'));\n"],"sourceRoot":""}