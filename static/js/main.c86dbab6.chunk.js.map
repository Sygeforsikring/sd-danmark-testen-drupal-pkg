{"version":3,"sources":["includes/constants.js","includes/history.js","helpers/siteImproveEventPush.js","AgeStep.js","ResultPage.js","DanmarkTesten.js","includes/common.js","index.js"],"names":["STATE_INITIAL","given_answers","step","history","STATE_TEST_STARTED","historyRecord","instance","score","calcScore","historyWithScore","isDebugging","property","console","group","log","groupEnd","setState","state","siteImproveEventPush","event","category","action","label","_sz","push","window","AgeStep","props","componentDidMount","handleChange","age","parseInt","target","value","showMessage","handleNext","answer","find","intervals","element","from","to","nextStep","id","answer_ids","answers","forEach","res","text","split","answer_id","map","a","buttonClass","this","className","htmlFor","name","type","onChange","onClick","message","renderHTML","Component","ResultPage","ref","current","querySelectorAll","link","addEventListener","componentWillUnmount","removeEventlistner","e","innerText","React","createRef","primaryGroupName","secondaryGroupName","pris","markup","primaryButtonLink","secondaryButtonText","secondaryButtonLink","href","primaryButtonText","axios","require","FadeTransition","extendedChildren","Children","children","child","cloneElement","Loading","TestIntro","intro","start","TestStep","info","answered","length","filteredAnswers","filter","undefined","includes","answers_for_this_question","question","key","bind","extra","Question","recordAnswerAndStep","add_answer","del_answers","Result","result","resultClass","html","Status","steps","i","count","classes","DanmarkTesten","quiz","startTest","next_step","json","questions","deps","depends","met_deps","dep","operator","findScores","scores","first_answer","Array","isArray","prelim_answers","q","sub","reduce","sum","getResult","results","up_to","in","goBack","pop","formerHistoryElement","historyElementWithoutScore","historyGoBack","debug","get","then","data","catch","warn","status_step","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c86dbab6.chunk.js","sourcesContent":["export const STATE_INITIAL = {\n  given_answers: [],\n  step: 0,\n  history: []\n}\n\nexport const STATE_TEST_STARTED = {\n  given_answers: [],\n  step: 1\n}\n","import { STATE_TEST_STARTED } from './constants'\n\nexport const historyRecord = (instance, history) => {\n  const score = instance.calcScore(history.given_answers)\n  // Add current score to history for debugging.\n  const historyWithScore = { ...history, ...{ score } }\n\n  if (instance.isDebugging()) {\n    console.group('historyRecord')\n    for (const property in historyWithScore) {\n      console.log(property, historyWithScore[property])\n    }\n    console.groupEnd('historyRecord')\n  }\n\n  // \"Record actions\" by adding element to history.\n  instance.setState({ history: [...instance.state.history, historyWithScore] })\n}\n\nexport const historyGoBack = (instance) => {\n  let history = [...instance.state.history]\n  // Skip last entry because we go back in time.\n  history.pop()\n  // If history is totally emptied\n  // make sure that its set to test start (step 1).\n  history = history.length ? history : STATE_TEST_STARTED\n  // Get last entry from history (which was the previous user choice).\n  const formerHistoryElement = history[history.length - 1]\n\n  if (instance.isDebugging()) {\n    console.group('historyGoBack')\n    for (const property in formerHistoryElement) {\n      console.log(property, formerHistoryElement[property])\n    }\n    console.groupEnd('historyGoBack')\n  }\n\n  // Delete score from state object.\n  // We dont want to set it in state\n  // since application handles that in calcScore().\n  const { score, ...historyElementWithoutScore } = formerHistoryElement\n\n  // Rewind both history and state to previous step.\n  instance.setState({ ...{ history }, ...historyElementWithoutScore })\n}\n","/* eslint-disable */ \nexport const siteImproveEventPush = (event, category, action, label) => {\n  if (typeof _sz === 'undefined') {\n    return;\n  }\n  \n  if (typeof _sz.push === 'function') {\n    _sz.push(['event', category, action, label]);\n    // TODO: Remove before releasing\n    window.console.log(`Siteimprove: ${label}`);\n  }\n  return event;\n};\n/* eslint-enable */","import React, { Component } from 'react';\nimport renderHTML from 'react-render-html';\nimport { find } from 'lodash';\nimport { siteImproveEventPush } from './helpers/siteImproveEventPush';\n\n//------------------- AgeStep ------------------------------\nexport class AgeStep extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n        let intervals = [];\n        props.answers.forEach(answer => {\n            let res = answer.text.split(\"-\");\n            intervals.push({\n                from: res[0],\n                to: res[1],\n                id: answer.answer_id\n            });\n        });\n        const answer_ids = props.answers.map((a) => a.answer_id);\n        this.state = { age: '', intervals, answer_ids, showMessage: false};\n  }\n  \n  componentDidMount = () => {\n    siteImproveEventPush(\n      null,\n      'danmark testen',\n      'Load Age step',\n      'User continued to age step'\n    )\n  }\n\n    handleChange = (event) => {\n        this.setState({\n            age: parseInt(event.target.value),\n            showMessage: false\n        });\n    };\n\n    handleNext = (event) => {\n        const age = this.state.age;\n        if (age < 16 || age > 59) {\n            this.setState({showMessage: true});\n            siteImproveEventPush(\n              null,\n              'danmark testen',\n              'Age input error',\n              'User gets an error on enter age step'\n            )\n            return;\n        }\n\n        let answer = find(this.state.intervals, function(element) {\n            return  age >= element.from && age <= element.to;\n        });\n\n        this.props.nextStep(answer.id, this.state.answer_ids);\n\n     };\n\n    render() {\n        const buttonClass = this.state.showMessage ? 'next disabled' : 'next';\n        return (\n            <div className=\"age-step\">\n                <label htmlFor=\"age\">Indtast alder:</label>\n                <input name=\"age\" type=\"number\" value={this.state.age} onChange={this.handleChange} />\n                <button className={buttonClass} onClick={this.handleNext}>NÃ¦ste</button>\n                { this.state.showMessage && this.props.message &&\n                    <div className=\"message\">\n                    { renderHTML(this.props.message) }\n                    </div>\n                }\n            </div>\n        );\n\t}\n}\n","import React, { Component } from \"react\";\nimport renderHTML from \"react-render-html\";\nimport { siteImproveEventPush } from \"./helpers/siteImproveEventPush\";\n\n//------------------- Result page ------------------------------\nexport class ResultPage extends Component {\n  constructor(props) {\n    super(props);\n    this.ref = React.createRef();\n  }\n\n  componentDidMount = () => {\n    siteImproveEventPush(\n      null,\n      \"danmark testen\",\n      \"Load resultpage\",\n      `User loads resultpage for group: ${this.props.group}`\n    );\n\n    this.ref.current\n      .querySelectorAll(\"a\")\n      .forEach((link) => link.addEventListener(\"click\", this.onClick, false));\n  };\n\n  componentWillUnmount = () => {\n    this.ref.current\n      .querySelectorAll(\"a\")\n      .forEach((link) => link.removeEventlistner(\"click\", this.onClick, false));\n  };\n\n  onClick = (e) => {\n    const group = this.props.group;\n    const text = e.target.innerText;\n    siteImproveEventPush(\n      null,\n      \"danmark testen\",\n      `Click ${text}`,\n      `User clicked ${text} from resultpage for group: ${group}`\n    );\n  };\n\n  render() {\n    return (\n      <div className={this.props.className} ref={this.ref}>\n        <h4>Basis</h4>\n\n        {this.props.primaryGroupName && <h2>{this.props.primaryGroupName}</h2>}\n\n        {this.props.secondaryGroupName && (\n          <h4 className=\"secondary-group-name\">\n            {this.props.secondaryGroupName}\n          </h4>\n        )}\n        {this.props?.pris && (\n          <h2 className=\"price\">\n            {this.props.pris} kr.\n            <span className=\"price-sub-text\"> pr. kvartal</span>\n          </h2>\n        )}\n        {renderHTML(this.props.markup)}\n\n        {(this.props.primaryButtonLink || this.props.secondaryButtonText) && (\n          <div className=\"button-wrapper\">\n            {this.props.secondaryButtonLink && (\n              <a href={this.props.secondaryButtonLink}>\n                {this.props.secondaryButtonText}\n              </a>\n            )}\n\n            {this.props.primaryButtonLink && (\n              <a href={this.props.primaryButtonLink} className=\"primary\">\n                {this.props.primaryButtonText}\n              </a>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport renderHTML from \"react-render-html\";\nimport { filter, includes } from \"lodash\";\nimport \"./main.css\";\nimport { historyRecord, historyGoBack } from \"./includes/history\";\nimport { jsonUrl } from \"./includes/common\";\nimport { STATE_INITIAL, STATE_TEST_STARTED } from \"./includes/constants\";\nimport { AgeStep } from \"./AgeStep\";\nimport { ResultPage } from \"./ResultPage\";\n\nvar axios = require(\"axios\");\n\n//------------------- FadeTransition ------------------------------\nconst FadeTransition = (props) => {\n  const extendedChildren = React.Children.map(props.children, (child) => {\n    return child.props.className\n      ? React.cloneElement(child, {\n          className: child.props.className + \" fade-in\",\n        })\n      : child;\n  });\n\n  return <div>{extendedChildren}</div>;\n};\nFadeTransition.propTypes = {};\n\n//------------------- Loading ------------------------------\n\nfunction Loading(props) {\n  return (\n    <FadeTransition {...props}>\n      <p>Henter data...</p>\n    </FadeTransition>\n  );\n}\nLoading.propTypes = {};\n\n//------------------- TestIntro --------------------------    ----\n\nfunction TestIntro(props) {\n  return (\n    <FadeTransition {...props}>\n      <div className=\"test-wrapper--intro\">\n        <div className=\"test-wrapper--intro-illustration\"></div>\n        {renderHTML(props.intro)}\n        <button onClick={props.start}>\n          Start testen <span className=\"icon-arrow\"> </span>\n        </button>\n      </div>\n    </FadeTransition>\n  );\n}\nTestIntro.propTypes = {\n  intro: PropTypes.string.isRequired,\n  start: PropTypes.func.isRequired,\n};\n\n//------------------- TestStep ------------------------------\n\nfunction TestStep(props) {\n  var step = props.step;\n  var info = props.info;\n  var onClick = props.onClick;\n  var answered = props.answered;\n\n  const age = answered.length > 0 ? answered[0] : null;\n  const filteredAnswers = filter(\n    info.answers,\n    function (answer) {\n      return (\n        answer.age === undefined ||\n        answer.age === null ||\n        includes(answer.age, age)\n      );\n    },\n    age\n  );\n\n  var answers_for_this_question = filteredAnswers.map((a) => a.answer_id);\n\n  return (\n    <div className=\"test-wrapper--step\">\n      <h2>{info.question}</h2>\n      {info.text && renderHTML(info.text)}\n\n      {step === 1 && (\n        <AgeStep\n          answers={info.answers}\n          nextStep={onClick}\n          message={info.message}\n        />\n      )}\n\n      {step > 1 &&\n        filteredAnswers.map((answer) => {\n          var className;\n          if (answered.includes(answer.answer_id)) className = \"active\";\n          return (\n            <div key={answer.answer_id}>\n              <button\n                className={className}\n                onClick={onClick.bind(\n                  null,\n                  answer.answer_id,\n                  answers_for_this_question\n                )}\n              >\n                {answer.text}\n              </button>\n            </div>\n          );\n        })}\n      {info.extra && renderHTML(info.extra)}\n    </div>\n  );\n}\nTestStep.propTypes = {\n  info: PropTypes.object.isRequired,\n  onClick: PropTypes.func.isRequired,\n  answered: PropTypes.array.isRequired,\n};\n\n//------------------- Question ------------------------------\n\nfunction Question(props) {\n  var step = props.step;\n  var question = props.question;\n  var given_answers = props.given_answers;\n  var recordAnswerAndStep = props.recordAnswerAndStep;\n  let onClick = (add_answer, del_answers) => {\n    recordAnswerAndStep(add_answer, del_answers);\n  };\n\n  return (\n    <FadeTransition {...props}>\n      <div className=\"Question\">\n        <TestStep\n          step={step}\n          info={question}\n          onClick={onClick}\n          answered={given_answers}\n        />\n      </div>\n    </FadeTransition>\n  );\n}\n\nQuestion.propTypes = {\n  question: PropTypes.object.isRequired,\n  given_answers: PropTypes.array.isRequired,\n  recordAnswerAndStep: PropTypes.func.isRequired,\n  step: PropTypes.number.isRequired,\n};\n\n//------------------- Result ------------------------------\n\nfunction Result(props) {\n  const { result } = props;\n  const resultClass = `result result__group--${result.group}`;\n\n  return (\n    <FadeTransition {...props}>\n      <div className=\"test-wrapper--result\">\n        <ResultPage\n          className={resultClass}\n          markup={result.html}\n          group={result.group}\n          primaryGroupName={result.primaryGroupName}\n          secondaryGroupName={result.secondaryGroupName}\n          pris={result?.pris}\n          primaryButtonText={result.primaryButtonText}\n          primaryButtonLink={result.primaryButtonLink}\n          secondaryButtonText={result.secondaryButtonText}\n          secondaryButtonLink={result.secondaryButtonLink}\n        />\n      </div>\n    </FadeTransition>\n  );\n}\nResult.propTypes = {\n  result: PropTypes.object.isRequired,\n};\n\n//------------------- Status ------------------------------\n\nfunction Status(props) {\n  var steps = [];\n  for (let i = 0; i < props.count; ++i) {\n    steps[i] = \"\";\n  }\n  for (let i = 0; i < props.step - 1; ++i) {\n    steps[i] += \"seen \";\n  }\n  steps[props.step - 1] += \"active \";\n  steps[props.count - 1] += \"final \";\n  return (\n    <ul className=\"test-wrapper--status\">\n      {steps.map(function (classes, i) {\n        return (\n          <li key={i} className={classes}>\n            <i></i>\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\nStatus.propTypes = {\n  step: PropTypes.number.isRequired,\n  count: PropTypes.number.isRequired,\n};\n\n//------------------- DanmarkTesten ------------------------------\n\nclass DanmarkTesten extends Component {\n  constructor(props) {\n    super(props);\n\n    if (props.json) {\n      // test inject\n      this.state = {\n        ...STATE_INITIAL,\n        ...{\n          steps: props.json.questions[props.json.questions.length - 1].step + 1,\n          count: props.json.questions.length + 1,\n          json: props.json,\n        },\n      };\n    } else {\n      this.state = STATE_INITIAL;\n\n      axios\n        .get(jsonUrl(this.props.quiz))\n        .then((res) => {\n          var json = res.data;\n          this.setState(() => {\n            return {\n              steps: json.questions[json.questions.length - 1].step + 1,\n              count: json.questions.length + 1,\n              json: json,\n            };\n          });\n        })\n        .catch((e) => {\n          if (console.warn) console.warn(e);\n        });\n    }\n  }\n\n  startTest = () => {\n    this.setState(() => {\n      return { step: 1 };\n    });\n    historyRecord(this, STATE_TEST_STARTED);\n  };\n\n  recordAnswerAndStep = (answer, del_answers) => {\n    let given_answers = this.state.given_answers.filter(\n      (e) => !del_answers.includes(e)\n    );\n\n    given_answers.push(answer);\n\n    let res = { given_answers };\n\n    if (this.calcScore(given_answers) < 0) {\n      res.step = this.state.count;\n\n      historyRecord(this, {\n        step: res.step,\n        given_answers: res.given_answers,\n      });\n      this.setState(res);\n      return;\n    }\n\n    let step = 0;\n\n    let next_step = this.state.step + 1;\n    if (next_step >= this.state.count) {\n      step = this.state.count;\n    }\n\n    while (!step && next_step < this.state.count) {\n      let question = this.state.json.questions[next_step - 1];\n\n      let deps = question.depends || [];\n      if (!deps.length) {\n        step = next_step;\n      } else {\n        let met_deps = 0;\n        deps.forEach((dep) => {\n          given_answers.forEach((answer) => {\n            if (dep === answer) {\n              ++met_deps;\n            }\n          });\n        });\n\n        if (0 < met_deps) {\n          if (question.operator && question.operator === \"or\") {\n            step = next_step;\n          }\n          if (met_deps === deps.length) {\n            step = next_step;\n          }\n        }\n      }\n      next_step++;\n    }\n\n    if (!step || step >= this.state.count) {\n      step = this.state.count;\n    }\n\n    res.step = step;\n\n    historyRecord(this, {\n      step: res.step,\n      given_answers: res.given_answers,\n    });\n    this.setState(res);\n  };\n\n  findScores = (scores, answers, first_answer) => {\n    for (let i = 0; i < answers.length; ++i) {\n      let a = answers[i];\n      scores[a.answer_id] = Array.isArray(a.score)\n        ? a.score[first_answer]\n        : a.score;\n    }\n    return scores;\n  };\n\n  calcScore = (prelim_answers) => {\n    if (!this.state.json) {\n      return 0;\n    }\n\n    let given_answers = prelim_answers || this.state.given_answers;\n    let questions = this.state.json.questions;\n    let scores = [];\n    let first_answer = given_answers[0] || 0;\n    for (let i = 0; i < questions.length; ++i) {\n      let q = questions[i];\n      this.findScores(scores, q.answers, first_answer);\n      if (q.sub) {\n        q.sub.forEach((sub) => {\n          this.findScores(scores, sub.answers, first_answer);\n        });\n      }\n    }\n    let score = given_answers.reduce((sum, i) => sum + scores[i], 0);\n    return score;\n  };\n\n  getResult = () => {\n    var score = this.calcScore();\n    var results = this.state.json.results;\n    for (var i = 0; i < results.length; ++i) {\n      var res = results[i];\n      if (\n        (res.up_to && score < res.up_to) ||\n        (res.in && res.in.includes(score)) ||\n        (!res.in && !res.up_to)\n      ) {\n        return res;\n      }\n    }\n    return {};\n  };\n\n  goBack = () => historyGoBack(this);\n\n  isDebugging = () => this.state.json !== undefined && this.state.json.debug;\n\n  render() {\n    let status_step = 0;\n    if (this.state.step)\n      status_step =\n        this.state.step >= this.state.count\n          ? this.state.steps\n          : this.state.json.questions[this.state.step - 1].step;\n\n    if (this.isDebugging()) {\n      console.group(\"Current state\");\n      console.log(\"History\", this.state.history);\n      console.log(\"Current score\", this.calcScore());\n      console.log(\"State\", this.state);\n      console.groupEnd(\"Current state\");\n    }\n\n    return (\n      <div className=\"test-wrapper\">\n        {1 < this.state.step && this.state.step < this.state.count && (\n          <div className=\"button-back\" onClick={this.goBack}>\n            Tilbage\n          </div>\n        )}\n        <div className=\"test-wrapper-body\">\n          {0 === this.state.step && !this.state.json && (\n            <Loading key=\"loading\" />\n          )}\n          {0 === this.state.step && this.state.json && (\n            <TestIntro\n              key=\"testintro\"\n              intro={this.state.json.intro}\n              start={this.startTest}\n            />\n          )}\n          {0 < this.state.step && this.state.step >= this.state.count && (\n            <Result key=\"result\" result={this.getResult()} />\n          )}\n          {0 < this.state.step && this.state.step < this.state.count && (\n            <Question\n              step={this.state.step}\n              key={\"question\" + this.state.step}\n              question={this.state.json.questions[this.state.step - 1]}\n              given_answers={this.state.given_answers}\n              recordAnswerAndStep={this.recordAnswerAndStep}\n            />\n          )}\n          {0 < this.state.step && (\n            <Status key=\"status\" step={status_step} count={this.state.steps} />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nDanmarkTesten.propTypes = {\n  quiz: PropTypes.string,\n  json: PropTypes.object,\n};\n\nexport default DanmarkTesten;\n","export const jsonUrl = (quiz) => {\n  switch (process.env.NODE_ENV) {\n    case 'development':\n      return `http://localhost:3000/${quiz}.json`\n\n    case 'production':\n    default:\n      return `/api/${quiz}`\n  }\n}\n","import 'react-app-polyfill/ie11'; // For IE 11 support\nimport 'core-js/es/array'\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport DanmarkTesten from './DanmarkTesten';\n\nReactDOM.render(<DanmarkTesten quiz=\"danmark-testen\" />, document.getElementById('danmark-testen'));\n"],"sourceRoot":""}