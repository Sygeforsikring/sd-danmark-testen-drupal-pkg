{"version":3,"sources":["includes/constants.js","includes/history.js","includes/common.js","helpers/siteImproveEventPush.js","AgeStep.js","DanmarkTesten.js","index.js"],"names":["STATE_INITIAL","given_answers","step","history","STATE_TEST_STARTED","historyRecord","instance","score","calcScore","historyWithScore","Object","objectSpread","isDebugging","property","console","group","log","groupEnd","setState","concat","toConsumableArray","state","historyGoBack","pop","formerHistoryElement","length","historyElementWithoutScore","objectWithoutProperties","jsonUrl","quiz","siteImproveEventPush","event","category","action","label","_sz","push","window","AgeStep","_Component","inherits","_super","_createSuper","props","_this","classCallCheck","this","call","componentDidMount","handleChange","age","parseInt","target","value","showMessage","handleNext","answer","find","intervals","element","from","to","nextStep","id","answer_ids","answers","forEach","res","text","split","answer_id","map","a","createClass","key","buttonClass","react_default","createElement","className","htmlFor","name","type","onChange","onClick","message","renderHTML","Component","axios","require","FadeTransition","extendedChildren","React","Children","children","child","cloneElement","Loading","DanmarkTesten_FadeTransition","TestIntro","intro","start","TestStep","info","answered","filteredAnswers","filter","undefined","includes","answers_for_this_question","question","AgeStep_AgeStep","bind","extra","Question","recordAnswerAndStep","add_answer","del_answers","Result","result","resultClass","html","href","readmore","Status","steps","i","count","classes","DanmarkTesten","startTest","assertThisInitialized","e","next_step","json","questions","deps","depends","met_deps","dep","operator","findScores","scores","first_answer","Array","isArray","prelim_answers","q","sub","reduce","sum","getResult","results","up_to","in","goBack","debug","get","then","data","catch","warn","status_step","ReactDOM","render","src_DanmarkTesten","document","getElementById"],"mappings":"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","file":"static/js/main.b1a4ecdf.chunk.js","sourcesContent":["export const STATE_INITIAL = {\n  given_answers: [],\n  step: 0,\n  history: []\n}\n\nexport const STATE_TEST_STARTED = {\n  given_answers: [],\n  step: 1\n}\n","import { STATE_TEST_STARTED } from './constants'\n\nexport const historyRecord = (instance, history) => {\n  const score = instance.calcScore(history.given_answers)\n  // Add current score to history for debugging.\n  const historyWithScore = { ...history, ...{ score } }\n\n  if (instance.isDebugging()) {\n    console.group('historyRecord')\n    for (const property in historyWithScore) {\n      console.log(property, historyWithScore[property])\n    }\n    console.groupEnd('historyRecord')\n  }\n\n  // \"Record actions\" by adding element to history.\n  instance.setState({ history: [...instance.state.history, historyWithScore] })\n}\n\nexport const historyGoBack = (instance) => {\n  let history = [...instance.state.history]\n  // Skip last entry because we go back in time.\n  history.pop()\n  // If history is totally emptied\n  // make sure that its set to test start (step 1).\n  history = history.length ? history : STATE_TEST_STARTED\n  // Get last entry from history (which was the previous user choice).\n  const formerHistoryElement = history[history.length - 1]\n\n  if (instance.isDebugging()) {\n    console.group('historyGoBack')\n    for (const property in formerHistoryElement) {\n      console.log(property, formerHistoryElement[property])\n    }\n    console.groupEnd('historyGoBack')\n  }\n\n  // Delete score from state object.\n  // We dont want to set it in state\n  // since application handles that in calcScore().\n  const { score, ...historyElementWithoutScore } = formerHistoryElement\n\n  // Rewind both history and state to previous step.\n  instance.setState({ ...{ history }, ...historyElementWithoutScore })\n}\n","export const jsonUrl = (quiz) => {\n  switch (process.env.NODE_ENV) {\n    case 'development':\n      return `http://localhost:3000/${quiz}.json`\n\n    case 'production':\n    default:\n      return `/api/${quiz}`\n  }\n}\n","/* eslint-disable */ \nexport const siteImproveEventPush = (event, category, action, label) => {\n  if (typeof _sz === 'undefined') {\n    return;\n  }\n  \n  if (typeof _sz.push === 'function') {\n    _sz.push(['event', category, action, label]);\n    // TODO: Remove before releasing\n    window.console.log(`Siteimprove: ${label}`);\n  }\n  return event;\n};\n/* eslint-enable */","import React, { Component } from 'react';\nimport renderHTML from 'react-render-html';\nimport { find } from 'lodash';\nimport { siteImproveEventPush } from './helpers/siteImproveEventPush';\n\n//------------------- AgeStep ------------------------------\nexport class AgeStep extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n        let intervals = [];\n        props.answers.forEach(answer => {\n            let res = answer.text.split(\"-\");\n            intervals.push({\n                from: res[0],\n                to: res[1],\n                id: answer.answer_id\n            });\n        });\n        const answer_ids = props.answers.map((a) => a.answer_id);\n        this.state = { age: '', intervals, answer_ids, showMessage: false};\n  }\n  \n  componentDidMount = () => {\n    siteImproveEventPush(\n      null,\n      'danmark testen',\n      'Load Age step',\n      `User continued to age step`\n    )\n  }\n\n    handleChange = (event) => {\n        this.setState({\n            age: parseInt(event.target.value),\n            showMessage: false\n        });\n    };\n\n    handleNext = (event) => {\n        const age = this.state.age;\n        if (age < 16 || age > 59) {\n            this.setState({showMessage: true});\n            siteImproveEventPush(\n              null,\n              'danmark testen',\n              'Age input error',\n              'User gets an error on enter age step'\n            )\n            return;\n        }\n\n        let answer = find(this.state.intervals, function(element) {\n            return  age >= element.from && age <= element.to;\n        });\n\n        this.props.nextStep(answer.id, this.state.answer_ids);\n\n     };\n\n    render() {\n        const buttonClass = this.state.showMessage ? 'next disabled' : 'next';\n        return (\n            <div className=\"age-step\">\n                <label htmlFor=\"age\">Indtast alder:</label>\n                <input name=\"age\" type=\"number\" value={this.state.age} onChange={this.handleChange} />\n                <button className={buttonClass} onClick={this.handleNext}>Næste</button>\n                { this.state.showMessage && this.props.message &&\n                    <div className=\"message\">\n                    { renderHTML(this.props.message) }\n                    </div>\n                }\n            </div>\n        );\n\t}\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport renderHTML from 'react-render-html';\nimport {filter, includes} from 'lodash';\nimport './main.css';\nimport { historyRecord, historyGoBack } from './includes/history';\nimport { jsonUrl } from './includes/common';\nimport { STATE_INITIAL, STATE_TEST_STARTED } from './includes/constants'\nimport { AgeStep } from './AgeStep';\nimport { siteImproveEventPush } from './helpers/siteImproveEventPush';\n\nvar axios = require('axios');\n\n//------------------- FadeTransition ------------------------------\nconst FadeTransition = (props) => {\n\tconst extendedChildren = React.Children.map(props.children, (child) => {\n    return child.props.className ? React.cloneElement(\n      child,\n      {\n        className: child.props.className + ' fade-in',\n      }\n    ) : child;\n  });\n\n\treturn (\n\t\t<div>\n\t\t\t{extendedChildren}\n\t\t</div>\n\t);\n}\nFadeTransition.propTypes = {\n};\n\n//------------------- Loading ------------------------------\n\nfunction Loading(props) {\n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t\t<p>Henter data...</p>\n\t\t</FadeTransition>\n\t);\n}\nLoading.propTypes = {\n};\n\n//------------------- TestIntro ------------------------------\n\nfunction TestIntro(props) {\n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t<div className=\"test-wrapper--intro\">\n\t\t\t<div className=\"test-wrapper--intro-illustration\" />\n\t\t\t{renderHTML(props.intro)}\n\t\t\t<button onClick={props.start}>Start testen</button>\n\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\nTestIntro.propTypes = {\n\tintro: PropTypes.string.isRequired,\n\tstart: PropTypes.func.isRequired\n};\n\n//------------------- TestStep ------------------------------\n\nfunction TestStep(props) {\n\tvar step = props.step;\n\tvar info = props.info;\n\tvar onClick = props.onClick;\n\tvar answered = props.answered;\n\n\tconst age = answered.length > 0 ? answered[0] : null;\n\tconst filteredAnswers = filter(info.answers, function(answer) {\n\t\treturn answer.age === undefined || answer.age === null || includes(answer.age, age);\n\t}, age);\n\n\tvar answers_for_this_question = filteredAnswers.map((a) => a.answer_id);\n\n\treturn (\n\t\t<div className=\"test-wrapper--step\">\n\t\t\t<h2>{info.question}</h2>\n\t\t\t{info.text && renderHTML(info.text)}\n\n\t\t\t{\n\t\t\t\tstep === 1 && <AgeStep answers={info.answers} nextStep={onClick} message={info.message}/>\n\t\t\t}\n\n\t\t\t{step > 1 && filteredAnswers.map(\n\t\t\t\t(answer) => {\n\t\t\t\t\tvar className;\n\t\t\t\t\tif (answered.includes(answer.answer_id)) className = \"active\";\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={answer.answer_id}>\n\t\t\t\t\t\t  <button className={className} onClick={onClick.bind(null,answer.answer_id, answers_for_this_question)}>{answer.text}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t)}\n\t\t\t{info.extra && renderHTML(info.extra)}\n\t\t</div>\n\t);\n}\nTestStep.propTypes = {\n\tinfo: PropTypes.object.isRequired,\n\tonClick: PropTypes.func.isRequired,\n\tanswered: PropTypes.array.isRequired\n};\n\n//------------------- Question ------------------------------\n\nfunction Question(props) {\n\tvar step          = props.step;\n\tvar question      = props.question;\n\tvar given_answers = props.given_answers;\n\tvar recordAnswerAndStep = props.recordAnswerAndStep;\n\tlet onClick       = (add_answer, del_answers) => {\n\t\trecordAnswerAndStep(add_answer, del_answers);\n\t};\n\n\treturn (\n    <FadeTransition {...props}>\n\t\t\t<div className=\"Question\">\n\t\t\t  <TestStep step={step} info={question} onClick={onClick} answered={given_answers}/>\n\t\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\n\nQuestion.propTypes = {\n\tquestion: PropTypes.object.isRequired,\n\tgiven_answers: PropTypes.array.isRequired,\n\trecordAnswerAndStep: PropTypes.func.isRequired,\n\tstep: PropTypes.number.isRequired\n};\n\n//------------------- Result ------------------------------\n\nfunction Result(props) {\n\tconst { result } = props;\n\tconst resultClass = `result result__group--${result.group}`;\n  siteImproveEventPush(\n    null,\n    'danmark testen',\n    'Load resultpage',\n    `User loads resultpage for group: ${result.group}`\n  )\n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t\t<div className=\"test-wrapper--result\">\n\t\t\t\t<div className={resultClass}>\n\t\t\t\t\t{renderHTML(result.html)}\n          <a\n            className=\"result__link\"\n            href={`/grupper#tabs-${result.readmore}`}\n            onClick={() => siteImproveEventPush(\n              null,\n              'danmark testen',\n              'Click read more',\n              `User clicked read more from resultpage for group: ${result.group}`\n            )}\n          >Læs mere om grupperne</a>\n          <a\n            className=\"result__link result__link--signup\"\n            href='/indmeldelse'\n            onClick={() => siteImproveEventPush(\n              null,\n              'danmark testen',\n              'Click sign up',\n              `User clicked sign up from resultpage for group: ${result.group}`\n            )}\n          >Meld dig ind</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\nResult.propTypes = {\n\tresult:  PropTypes.object.isRequired\n};\n\n//------------------- Status ------------------------------\n\nfunction Status(props) {\n\tvar steps = [];\n\tfor (let i = 0; i < props.count; ++i) {\n\t\tsteps[i] = \"\";\n\t}\n\tfor (let i = 0; i < props.step-1; ++i) {\n\t\tsteps[i] += 'seen ';\n\t}\n\tsteps[props.step  - 1] += 'active ';\n\tsteps[props.count - 1] += 'final ';\n\treturn (\n\t\t<ul className=\"test-wrapper--status\">\n\t\t\t{steps.map(function(classes,i) {\n\t\t\t\treturn (<li key={i} className={classes}><i></i></li>);\n\t\t\t})}\n\t\t</ul>\n\t);\n}\nStatus.propTypes = {\n\tstep:  PropTypes.number.isRequired,\n\tcount: PropTypes.number.isRequired\n};\n\n//------------------- DanmarkTesten ------------------------------\n\nclass DanmarkTesten extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tif (props.json) { // test inject\n\t\t\tthis.state = {\n\t\t\t\t...STATE_INITIAL,\n\t\t\t\t...{\n\t\t\t\t\tsteps: props.json.questions[props.json.questions.length - 1].step + 1,\n\t\t\t\t\tcount: props.json.questions.length + 1,\n\t\t\t\t\tjson: props.json,\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tthis.state = STATE_INITIAL;\n\n\t\t\taxios.get(jsonUrl(this.props.quiz)).then((res) => {\n\t\t\t\tvar json = res.data;\n\t\t\t\tthis.setState(() => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tsteps: json.questions[json.questions.length - 1].step+1,\n\t\t\t\t\t\tcount: json.questions.length + 1,\n\t\t\t\t\t\tjson:  json\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}).catch((e) => {\n\t\t\t\tif (console.warn) console.warn(e);\n\t\t\t});\n\n\t\t}\n\t}\n\n\tstartTest = () => {\n\t\tthis.setState(() => {\n\t\t\treturn { step: 1 };\n\t\t});\n\t\thistoryRecord(this, STATE_TEST_STARTED);\n\t};\n\n\trecordAnswerAndStep = (answer, del_answers) => {\n\t\tlet given_answers = this.state.given_answers.filter((e) => !del_answers.includes(e));\n\n\t\tgiven_answers.push(answer);\n\n\t\tlet res = { given_answers };\n\n\t\tif (this.calcScore(given_answers) < 0) {\n\t\t\tres.step = this.state.count;\n\n\t\t\thistoryRecord(this, {\n\t\t\t\tstep: res.step,\n\t\t\t\tgiven_answers: res.given_answers\n\t\t\t});\n\t\t\tthis.setState(res);\n\t\t\treturn;\n\t\t}\n\n\t\tlet step = 0;\n\n\t\tlet next_step = this.state.step + 1;\n\t\tif (next_step >= this.state.count) {\n\t\t\tstep = this.state.count;\n\t\t}\n\n\t\twhile(!step && next_step < this.state.count) {\n\t\t\tlet question = this.state.json.questions[next_step-1];\n\n\t\t\tlet deps = question.depends || [];\n\t\t\tif (!deps.length) {\n\t\t\t\tstep = next_step;\n\t\t\t} else {\n\t\t\t    let met_deps = 0;\n\t\t\t    deps.forEach((dep) => {\n\t\t\t\t    given_answers.forEach((answer) => {\n\t\t\t\t\t    if (dep === answer) {\n\t\t\t\t\t\t    ++met_deps;\n\t\t\t\t\t    }\n\t\t\t\t    });\n\t\t\t    });\n\n\t\t\t    if (0 < met_deps) {\n\t\t\t    \tif (question.operator && question.operator === 'or') {\n\t\t\t\t\t\tstep = next_step;\n\t\t\t    \t}\n\t\t\t    \tif (met_deps === deps.length) {\n\t\t\t\t\t\tstep = next_step;\n\t\t\t    \t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tnext_step++;\n\t\t}\n\n\t\tif (!step || step >= this.state.count) {\n\t\t\tstep = this.state.count;\n\t\t}\n\n\t\tres.step = step;\n\n\t\thistoryRecord(this, {\n\t\t\tstep: res.step,\n\t\t\tgiven_answers: res.given_answers\n\t\t});\n\t\tthis.setState(res);\n\t};\n\n\tfindScores = (scores, answers, first_answer) => {\n\t\tfor (let i = 0; i < answers.length; ++i) {\n\t\t\tlet a = answers[i];\n\t\t\tscores[ a.answer_id ] = Array.isArray(a.score) ? a.score[ first_answer ] : a.score;\n\t\t}\n\t\treturn scores;\n\t};\n\n\tcalcScore = (prelim_answers) => {\n\t\tif (!this.state.json) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet given_answers = prelim_answers || this.state.given_answers;\n\t\tlet questions = this.state.json.questions;\n\t\tlet scores = [];\n\t\tlet first_answer = given_answers[0] || 0;\n\t\tfor (let i = 0; i < questions.length; ++i) {\n\t\t\tlet q = questions[i];\n\t\t\tthis.findScores(scores, q.answers, first_answer);\n\t\t\tif (q.sub) {\n                q.sub.forEach((sub) => {\n\t\t\t\t    this.findScores(scores, sub.answers, first_answer);\n                });\n\t\t\t}\n\t\t}\n\t\tlet score = given_answers.reduce((sum, i) => sum + scores[i], 0);\n\t\treturn score;\n\t};\n\n\tgetResult = () => {\n\t\tvar score = this.calcScore();\n\t\tvar results = this.state.json.results;\n\t\tfor (var i = 0; i < results.length; ++i) {\n\t\t\tvar res = results[i];\n\t\t\tif (   (res.up_to && score < res.up_to)\n\t\t\t\t|| (res.in    && res.in.includes(score))\n\t\t\t\t|| (!res.in   && !res.up_to))\n\t\t\t{\n\t\t\t\treturn res;\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t};\n\n\tgoBack = () => historyGoBack(this);\n\n\tisDebugging = () => this.state.json !== undefined && this.state.json.debug\n\n\trender() {\n\t\tlet status_step = 0;\n\t\tif (this.state.step)\n\t\t\tstatus_step = (this.state.step >= this.state.count) ?\n\t\t\t\tthis.state.steps :\n\t\t\t\tthis.state.json.questions[this.state.step-1].step;\n\n\t\tif (this.isDebugging()) {\n\t\t\tconsole.group('Current state');\n\t\t\tconsole.log('History', this.state.history);\n\t\t\tconsole.log('Current score', this.calcScore());\n\t\t\tconsole.log('State', this.state);\n\t\t\tconsole.groupEnd('Current state');\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"test-wrapper\">\n\t\t\t\t{1 < this.state.step\n\t\t\t\t\t&& <div className=\"button-back\" onClick={this.goBack}>Tilbage</div>\n\t\t\t\t}\n\t\t\t\t<div className=\"test-wrapper-body\">\n\t\t\t\t\t{0 === this.state.step && !this.state.json &&\n\t\t\t\t\t\t<Loading key=\"loading\" />\n\t\t\t\t\t}\n\t\t\t\t\t{0 === this.state.step && this.state.json &&\n\t\t\t\t\t\t<TestIntro\n\t\t\t\t\t\t\tkey=\"testintro\"\n\t\t\t\t\t\t\tintro={this.state.json.intro}\n\t\t\t\t\t\t\tstart={this.startTest}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step && this.state.step >= this.state.count &&\n\t\t\t\t\t\t<Result\n\t\t\t\t\t\t\tkey=\"result\"\n\t\t\t\t\t\t\tresult={this.getResult()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step && this.state.step < this.state.count &&\n\t\t\t\t\t\t<Question\n\t\t\t\t\t\t    step={ this.state.step }\n\t\t\t\t\t\t\tkey={\"question\" + this.state.step}\n\t\t\t\t\t\t\tquestion={this.state.json.questions[this.state.step - 1]}\n\t\t\t\t\t\t\tgiven_answers={this.state.given_answers}\n\t\t\t\t\t\t\trecordAnswerAndStep={this.recordAnswerAndStep}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step &&\n\t\t\t\t\t\t<Status\n\t\t\t\t\t\t\tkey=\"status\"\n\t\t\t\t\t\t\tstep={status_step}\n\t\t\t\t\t\t\tcount={this.state.steps}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nDanmarkTesten.propTypes = {\n\tquiz: PropTypes.string,\n\tjson: PropTypes.object\n};\n\nexport default DanmarkTesten;\n","import 'react-app-polyfill/ie11'; // For IE 11 support\nimport 'core-js/es7/array'\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport DanmarkTesten from './DanmarkTesten';\n\nReactDOM.render(<DanmarkTesten quiz=\"danmark-testen\" />, document.getElementById('danmark-testen'));\n//ReactDOM.render(<DanmarkTesten quiz=\"boerne-testen\" />, document.getElementById('boerne-testen'));\n"],"sourceRoot":""}