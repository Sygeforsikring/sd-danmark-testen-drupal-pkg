(this["webpackJsonpdanmark-testen"]=this["webpackJsonpdanmark-testen"]||[]).push([[0],{138:function(e,t,n){e.exports=n(267)},230:function(e,t){},232:function(e,t){},249:function(e,t,n){},267:function(e,t,n){"use strict";n.r(t);n(92),n(146),n(150),n(152),n(153),n(154),n(155),n(156),n(104),n(163),n(106),n(168),n(169),n(170),n(171),n(172),n(177),n(179),n(180),n(181),n(111),n(112),n(184);var s=n(0),a=n.n(s),r=n(136),o=n.n(r),i=n(23),c=n(30),u=n(31),l=n(26),p=n(33),m=n(32),h=n(22),d=n.n(h),f=n(50),g=(n(249),n(137)),v=n(91),E={given_answers:[],step:0,history:[]},y={given_answers:[],step:1},w=["score"],k=function(e,t){var n=e.calcScore(t.given_answers),s=Object(i.a)(Object(i.a)({},t),{score:n});if(e.isDebugging()){for(var a in console.group("historyRecord"),s)console.log(a,s[a]);console.groupEnd("historyRecord")}e.setState({history:[].concat(Object(v.a)(e.state.history),[s])})},b=function(e,t,n,s){if("undefined"!==typeof _sz)return"function"===typeof _sz.push&&(_sz.push(["event",t,n,s]),window.console.log("Siteimprove: ".concat(s))),e},j=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var s;Object(c.a)(this,n),(s=t.call(this,e)).componentDidMount=function(){b(null,"danmark testen","Load Age step","User continued to age step")},s.handleChange=function(e){s.setState({age:parseInt(e.target.value),showMessage:!1})},s.handleNext=function(e){var t=s.state.age;if(t<16||t>59)return s.setState({showMessage:!0}),void b(null,"danmark testen","Age input error","User gets an error on enter age step");var n=Object(f.find)(s.state.intervals,(function(e){return t>=e.from&&t<=e.to}));s.props.nextStep(n.id,s.state.answer_ids)};var a=[];e.answers.forEach((function(e){var t=e.text.split("-");a.push({from:t[0],to:t[1],id:e.answer_id})}));var r=e.answers.map((function(e){return e.answer_id}));return s.state={age:"",intervals:a,answer_ids:r,showMessage:!1},s}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state.showMessage?"next disabled":"next";return a.a.createElement("div",{className:"age-step"},a.a.createElement("label",{htmlFor:"age"},"Indtast alder:"),a.a.createElement("input",{name:"age",type:"number",value:this.state.age,onChange:this.handleChange}),a.a.createElement("button",{className:e,onClick:this.handleNext},"N\xe6ste"),this.state.showMessage&&this.props.message&&a.a.createElement("div",{className:"message"},d()(this.props.message)))}}]),n}(s.Component),N=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).componentDidMount=function(){b(null,"danmark testen","Load resultpage","User loads resultpage for group: ".concat(s.props.group)),s.ref.current.querySelectorAll("a").forEach((function(e){return e.addEventListener("click",s.onClick,!1)}))},s.componentWillUnmount=function(){s.ref.current.querySelectorAll("a").forEach((function(e){return e.removeEventlistner("click",s.onClick,!1)}))},s.onClick=function(e){var t=s.props.group,n=e.target.innerText;b(null,"danmark testen","Click ".concat(n),"User clicked ".concat(n," from resultpage for group: ").concat(t))},s.ref=a.a.createRef(),s}return Object(u.a)(n,[{key:"render",value:function(){var e;return a.a.createElement("div",{className:this.props.className,ref:this.ref},a.a.createElement("h4",null,"Basis"),this.props.primaryGroupName&&a.a.createElement("h2",null,this.props.primaryGroupName),this.props.secondaryGroupName&&a.a.createElement("h4",{className:"secondary-group-name"},this.props.secondaryGroupName),(null===(e=this.props)||void 0===e?void 0:e.pris)&&a.a.createElement("h2",{className:"price"},this.props.pris," kr.",a.a.createElement("span",{className:"price-sub-text"}," pr. kvartal")),d()(this.props.markup),(this.props.primaryButtonLink||this.props.secondaryButtonText)&&a.a.createElement("div",{className:"button-wrapper"},this.props.secondaryButtonLink&&a.a.createElement("a",{href:this.props.secondaryButtonLink},this.props.secondaryButtonText),this.props.primaryButtonLink&&a.a.createElement("a",{href:this.props.primaryButtonLink,className:"primary"},this.props.primaryButtonText)))}}]),n}(s.Component),_=n(250),O=function(e){var t=a.a.Children.map(e.children,(function(e){return e.props.className?a.a.cloneElement(e,{className:e.props.className+" fade-in"}):e}));return a.a.createElement("div",null,t)};function S(e){return a.a.createElement(O,e,a.a.createElement("p",null,"Henter data..."))}function x(e){return a.a.createElement(O,e,a.a.createElement("div",{className:"test-wrapper--intro"},a.a.createElement("div",{className:"test-wrapper--intro-illustration"}),d()(e.intro),a.a.createElement("button",{onClick:e.start},"Start testen ",a.a.createElement("span",{className:"icon-arrow"}," "))))}function B(e){var t=e.step,n=e.info,s=e.onClick,r=e.answered,o=r.length>0?r[0]:null,i=Object(f.filter)(n.answers,(function(e){return void 0===e.age||null===e.age||Object(f.includes)(e.age,o)}),o),c=i.map((function(e){return e.answer_id}));return a.a.createElement("div",{className:"test-wrapper--step"},a.a.createElement("h2",null,n.question),n.text&&d()(n.text),1===t&&a.a.createElement(j,{answers:n.answers,nextStep:s,message:n.message}),t>1&&i.map((function(e){var t;return r.includes(e.answer_id)&&(t="active"),a.a.createElement("div",{key:e.answer_id},a.a.createElement("button",{className:t,onClick:s.bind(null,e.answer_id,c)},e.text))})),n.extra&&d()(n.extra))}function C(e){var t=e.step,n=e.question,s=e.given_answers,r=e.recordAnswerAndStep;return a.a.createElement(O,e,a.a.createElement("div",{className:"Question"},a.a.createElement(B,{step:t,info:n,onClick:function(e,t){r(e,t)},answered:s})))}function q(e){var t=e.result,n="result result__group--".concat(t.group);return a.a.createElement(O,e,a.a.createElement("div",{className:"test-wrapper--result"},a.a.createElement(N,{className:n,markup:t.html,group:t.group,primaryGroupName:t.primaryGroupName,secondaryGroupName:t.secondaryGroupName,pris:null===t||void 0===t?void 0:t.pris,primaryButtonText:t.primaryButtonText,primaryButtonLink:t.primaryButtonLink,secondaryButtonText:t.secondaryButtonText,secondaryButtonLink:t.secondaryButtonLink})))}function A(e){for(var t=[],n=0;n<e.count;++n)t[n]="";for(var s=0;s<e.step-1;++s)t[s]+="seen ";return t[e.step-1]+="active ",t[e.count-1]+="final ",a.a.createElement("ul",{className:"test-wrapper--status"},t.map((function(e,t){return a.a.createElement("li",{key:t,className:e},a.a.createElement("i",null))})))}var L=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var s,a;return Object(c.a)(this,n),(s=t.call(this,e)).startTest=function(){s.setState((function(){return{step:1}})),k(Object(l.a)(s),y)},s.recordAnswerAndStep=function(e,t){var n=s.state.given_answers.filter((function(e){return!t.includes(e)}));n.push(e);var a={given_answers:n};if(s.calcScore(n)<0)return a.step=s.state.count,k(Object(l.a)(s),{step:a.step,given_answers:a.given_answers}),void s.setState(a);var r=0,o=s.state.step+1;for(o>=s.state.count&&(r=s.state.count);!r&&o<s.state.count;){var i=s.state.json.questions[o-1],c=i.depends||[];c.length?function(){var e=0;c.forEach((function(t){n.forEach((function(n){t===n&&++e}))})),0<e&&(i.operator&&"or"===i.operator&&(r=o),e===c.length&&(r=o))}():r=o,o++}(!r||r>=s.state.count)&&(r=s.state.count),a.step=r,k(Object(l.a)(s),{step:a.step,given_answers:a.given_answers}),s.setState(a)},s.findScores=function(e,t,n){for(var s=0;s<t.length;++s){var a=t[s];e[a.answer_id]=Array.isArray(a.score)?a.score[n]:a.score}return e},s.calcScore=function(e){if(!s.state.json)return 0;for(var t=e||s.state.given_answers,n=s.state.json.questions,a=[],r=t[0]||0,o=0;o<n.length;++o){var i=n[o];s.findScores(a,i.answers,r),i.sub&&i.sub.forEach((function(e){s.findScores(a,e.answers,r)}))}return t.reduce((function(e,t){return e+a[t]}),0)},s.getResult=function(){for(var e=s.calcScore(),t=s.state.json.results,n=0;n<t.length;++n){var a=t[n];if(a.up_to&&e<a.up_to||a.in&&a.in.includes(e)||!a.in&&!a.up_to)return a}return{}},s.goBack=function(){return function(e){var t=Object(v.a)(e.state.history);t.pop();var n=(t=t.length?t:y)[t.length-1];if(e.isDebugging()){for(var s in console.group("historyGoBack"),n)console.log(s,n[s]);console.groupEnd("historyGoBack")}n.score;var a=Object(g.a)(n,w);e.setState(Object(i.a)(Object(i.a)({},{history:t}),a))}(Object(l.a)(s))},s.isDebugging=function(){return void 0!==s.state.json&&s.state.json.debug},e.json?s.state=Object(i.a)(Object(i.a)({},E),{steps:e.json.questions[e.json.questions.length-1].step+1,count:e.json.questions.length+1,json:e.json}):(s.state=E,_.get((a=s.props.quiz,"/api/".concat(a))).then((function(e){var t=e.data;s.setState((function(){return{steps:t.questions[t.questions.length-1].step+1,count:t.questions.length+1,json:t}}))})).catch((function(e){console.warn&&console.warn(e)}))),s}return Object(u.a)(n,[{key:"render",value:function(){var e=0;return this.state.step&&(e=this.state.step>=this.state.count?this.state.steps:this.state.json.questions[this.state.step-1].step),this.isDebugging()&&(console.group("Current state"),console.log("History",this.state.history),console.log("Current score",this.calcScore()),console.log("State",this.state),console.groupEnd("Current state")),a.a.createElement("div",{className:"test-wrapper"},1<this.state.step&&this.state.step<this.state.count&&a.a.createElement("div",{className:"button-back",onClick:this.goBack},"Tilbage"),a.a.createElement("div",{className:"test-wrapper-body"},0===this.state.step&&!this.state.json&&a.a.createElement(S,{key:"loading"}),0===this.state.step&&this.state.json&&a.a.createElement(x,{key:"testintro",intro:this.state.json.intro,start:this.startTest}),0<this.state.step&&this.state.step>=this.state.count&&a.a.createElement(q,{key:"result",result:this.getResult()}),0<this.state.step&&this.state.step<this.state.count&&a.a.createElement(C,{step:this.state.step,key:"question"+this.state.step,question:this.state.json.questions[this.state.step-1],given_answers:this.state.given_answers,recordAnswerAndStep:this.recordAnswerAndStep}),0<this.state.step&&a.a.createElement(A,{key:"status",step:e,count:this.state.steps})))}}]),n}(s.Component);o.a.render(a.a.createElement(L,{quiz:"danmark-testen"}),document.getElementById("danmark-testen"))}},[[138,1,2]]]);
//# sourceMappingURL=main.c86dbab6.chunk.js.map