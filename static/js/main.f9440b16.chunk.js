(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(t,e,n){t.exports=n(223)},181:function(t,e){},183:function(t,e){},201:function(t,e,n){},223:function(t,e,n){"use strict";n.r(e);n(114),n(146);var s=n(0),r=n.n(s),a=n(111),o=n.n(a),c=n(33),i=n(18),u=n(19),l=n(13),p=n(20),f=n(21),h=n(5),d=n(8),g=n.n(d),v=n(32),m=(n(201),n(112)),w=n(70),b={given_answers:[],step:0,history:[]},j={given_answers:[],step:1},E=function(t,e){var n=t.calcScore(e.given_answers),s=Object(c.a)({},e,{score:n});if(t.isDebugging()){for(var r in console.group("historyRecord"),s)console.log(r,s[r]);console.groupEnd("historyRecord")}t.setState({history:[].concat(Object(w.a)(t.state.history),[s])})},y=function(t){var e=Object(w.a)(t.state.history);e.pop();var n=(e=e.length?e:j)[e.length-1];if(t.isDebugging()){for(var s in console.group("historyGoBack"),n)console.log(s,n[s]);console.groupEnd("historyGoBack")}n.score;var r=Object(m.a)(n,["score"]);t.setState(Object(c.a)({},{history:e},r))},k=function(t){return"/api/".concat(t)},O=function(t,e,n,s){if("undefined"!==typeof _sz)return"function"===typeof _sz.push&&(_sz.push(["event",e,n,s]),window.console.log("Siteimprove: ".concat(s))),t};function S(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,s=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return Object(f.a)(this,n)}}var _=function(t){Object(p.a)(n,t);var e=S(n);function n(t){var s;Object(i.a)(this,n),(s=e.call(this,t)).componentDidMount=function(){O(null,"danmark testen","Load Age step","User continued to age step")},s.handleChange=function(t){s.setState({age:parseInt(t.target.value),showMessage:!1})},s.handleNext=function(t){var e=s.state.age;if(e<16||e>59)return s.setState({showMessage:!0}),void O(null,"danmark testen","Age input error","User gets an error on enter age step");var n=Object(v.find)(s.state.intervals,function(t){return e>=t.from&&e<=t.to});s.props.nextStep(n.id,s.state.answer_ids)};var r=[];t.answers.forEach(function(t){var e=t.text.split("-");r.push({from:e[0],to:e[1],id:t.answer_id})});var a=t.answers.map(function(t){return t.answer_id});return s.state={age:"",intervals:r,answer_ids:a,showMessage:!1},s}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state.showMessage?"next disabled":"next";return r.a.createElement("div",{className:"age-step"},r.a.createElement("label",{htmlFor:"age"},"Indtast alder:"),r.a.createElement("input",{name:"age",type:"number",value:this.state.age,onChange:this.handleChange}),r.a.createElement("button",{className:t,onClick:this.handleNext},"N\xe6ste"),this.state.showMessage&&this.props.message&&r.a.createElement("div",{className:"message"},g()(this.props.message)))}}]),n}(s.Component);function N(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,s=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return Object(f.a)(this,n)}}var C=function(t){Object(p.a)(n,t);var e=N(n);function n(t){var s;return Object(i.a)(this,n),(s=e.call(this,t)).componentDidMount=function(){O(null,"danmark testen","Load resultpage","User loads resultpage for group: ".concat(s.props.group)),s.ref.current.querySelectorAll("a").forEach(function(t){return t.addEventListener("click",s.onClick,!1)})},s.componentWillUnmount=function(){s.ref.current.querySelectorAll("a").forEach(function(t){return t.removeEventlistner("click",s.onClick,!1)})},s.onClick=function(t){var e=s.props.group,n=t.target.innerText;O(null,"danmark testen","Click ".concat(n),"User clicked ".concat(n," from resultpage for group: ").concat(e))},s.ref=r.a.createRef(),s}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:this.props.className,ref:this.ref},g()(this.props.markup))}}]),n}(s.Component);function R(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,s=Object(h.a)(t);if(e){var r=Object(h.a)(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return Object(f.a)(this,n)}}var q=n(205),x=function(t){var e=r.a.Children.map(t.children,function(t){return t.props.className?r.a.cloneElement(t,{className:t.props.className+" fade-in"}):t});return r.a.createElement("div",null,e)};function A(t){return r.a.createElement(x,t,r.a.createElement("p",null,"Henter data..."))}function D(t){return r.a.createElement(x,t,r.a.createElement("div",{className:"test-wrapper--intro"},r.a.createElement("div",{className:"test-wrapper--intro-illustration"}),g()(t.intro),r.a.createElement("button",{onClick:t.start},"Start testen")))}function M(t){var e=t.step,n=t.info,s=t.onClick,a=t.answered,o=a.length>0?a[0]:null,c=Object(v.filter)(n.answers,function(t){return void 0===t.age||null===t.age||Object(v.includes)(t.age,o)},o),i=c.map(function(t){return t.answer_id});return r.a.createElement("div",{className:"test-wrapper--step"},r.a.createElement("h2",null,n.question),n.text&&g()(n.text),1===e&&r.a.createElement(_,{answers:n.answers,nextStep:s,message:n.message}),e>1&&c.map(function(t){var e;return a.includes(t.answer_id)&&(e="active"),r.a.createElement("div",{key:t.answer_id},r.a.createElement("button",{className:e,onClick:s.bind(null,t.answer_id,i)},t.text))}),n.extra&&g()(n.extra))}function z(t){var e=t.step,n=t.question,s=t.given_answers,a=t.recordAnswerAndStep;return r.a.createElement(x,t,r.a.createElement("div",{className:"Question"},r.a.createElement(M,{step:e,info:n,onClick:function(t,e){a(t,e)},answered:s})))}function B(t){var e=t.result,n="result result__group--".concat(e.group);return r.a.createElement(x,t,r.a.createElement("div",{className:"test-wrapper--result"},r.a.createElement(C,{className:n,markup:e.html,group:e.group})))}function U(t){for(var e=[],n=0;n<t.count;++n)e[n]="";for(var s=0;s<t.step-1;++s)e[s]+="seen ";return e[t.step-1]+="active ",e[t.count-1]+="final ",r.a.createElement("ul",{className:"test-wrapper--status"},e.map(function(t,e){return r.a.createElement("li",{key:e,className:t},r.a.createElement("i",null))}))}var T=function(t){Object(p.a)(n,t);var e=R(n);function n(t){var s;return Object(i.a)(this,n),(s=e.call(this,t)).startTest=function(){s.setState(function(){return{step:1}}),E(Object(l.a)(s),j)},s.recordAnswerAndStep=function(t,e){var n=s.state.given_answers.filter(function(t){return!e.includes(t)});n.push(t);var r={given_answers:n};if(s.calcScore(n)<0)return r.step=s.state.count,E(Object(l.a)(s),{step:r.step,given_answers:r.given_answers}),void s.setState(r);var a=0,o=s.state.step+1;for(o>=s.state.count&&(a=s.state.count);!a&&o<s.state.count;){var c=s.state.json.questions[o-1],i=c.depends||[];i.length?function(){var t=0;i.forEach(function(e){n.forEach(function(n){e===n&&++t})}),0<t&&(c.operator&&"or"===c.operator&&(a=o),t===i.length&&(a=o))}():a=o,o++}(!a||a>=s.state.count)&&(a=s.state.count),r.step=a,E(Object(l.a)(s),{step:r.step,given_answers:r.given_answers}),s.setState(r)},s.findScores=function(t,e,n){for(var s=0;s<e.length;++s){var r=e[s];t[r.answer_id]=Array.isArray(r.score)?r.score[n]:r.score}return t},s.calcScore=function(t){if(!s.state.json)return 0;for(var e=t||s.state.given_answers,n=s.state.json.questions,r=[],a=e[0]||0,o=0;o<n.length;++o){var c=n[o];s.findScores(r,c.answers,a),c.sub&&c.sub.forEach(function(t){s.findScores(r,t.answers,a)})}return e.reduce(function(t,e){return t+r[e]},0)},s.getResult=function(){for(var t=s.calcScore(),e=s.state.json.results,n=0;n<e.length;++n){var r=e[n];if(r.up_to&&t<r.up_to||r.in&&r.in.includes(t)||!r.in&&!r.up_to)return r}return{}},s.goBack=function(){return y(Object(l.a)(s))},s.isDebugging=function(){return void 0!==s.state.json&&s.state.json.debug},t.json?s.state=Object(c.a)({},b,{steps:t.json.questions[t.json.questions.length-1].step+1,count:t.json.questions.length+1,json:t.json}):(s.state=b,q.get(k(s.props.quiz)).then(function(t){var e=t.data;s.setState(function(){return{steps:e.questions[e.questions.length-1].step+1,count:e.questions.length+1,json:e}})}).catch(function(t){console.warn&&console.warn(t)})),s}return Object(u.a)(n,[{key:"render",value:function(){var t=0;return this.state.step&&(t=this.state.step>=this.state.count?this.state.steps:this.state.json.questions[this.state.step-1].step),this.isDebugging()&&(console.group("Current state"),console.log("History",this.state.history),console.log("Current score",this.calcScore()),console.log("State",this.state),console.groupEnd("Current state")),r.a.createElement("div",{className:"test-wrapper"},1<this.state.step&&r.a.createElement("div",{className:"button-back",onClick:this.goBack},"Tilbage"),r.a.createElement("div",{className:"test-wrapper-body"},0===this.state.step&&!this.state.json&&r.a.createElement(A,{key:"loading"}),0===this.state.step&&this.state.json&&r.a.createElement(D,{key:"testintro",intro:this.state.json.intro,start:this.startTest}),0<this.state.step&&this.state.step>=this.state.count&&r.a.createElement(B,{key:"result",result:this.getResult()}),0<this.state.step&&this.state.step<this.state.count&&r.a.createElement(z,{step:this.state.step,key:"question"+this.state.step,question:this.state.json.questions[this.state.step-1],given_answers:this.state.given_answers,recordAnswerAndStep:this.recordAnswerAndStep}),0<this.state.step&&r.a.createElement(U,{key:"status",step:t,count:this.state.steps})))}}]),n}(s.Component);o.a.render(r.a.createElement(T,{quiz:"danmark-testen"}),document.getElementById("danmark-testen"))}},[[113,2,1]]]);
//# sourceMappingURL=main.f9440b16.chunk.js.map