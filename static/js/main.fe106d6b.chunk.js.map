{"version":3,"sources":["includes/constants.js","includes/history.js","includes/common.js","AgeStep.js","DanmarkTesten.js","index.js"],"names":["STATE_INITIAL","given_answers","step","history","STATE_TEST_STARTED","historyRecord","instance","score","calcScore","historyWithScore","Object","objectSpread","isDebugging","property","console","group","log","groupEnd","setState","toConsumableArray","state","concat","historyGoBack","pop","formerHistoryElement","length","historyElementWithoutScore","objectWithoutProperties","jsonUrl","quiz","AgeStep","_Component","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleChange","event","age","parseInt","target","value","showMessage","handleNext","answer","find","intervals","element","from","to","nextStep","id","answer_ids","answers","forEach","res","text","split","push","answer_id","map","a","inherits","createClass","key","buttonClass","react_default","createElement","className","htmlFor","name","type","onChange","onClick","message","renderHTML","Component","axios","require","FadeTransition","extendedChildren","React","Children","children","child","cloneElement","Loading","DanmarkTesten_FadeTransition","TestIntro","intro","start","TestStep","info","answered","answers_for_this_question","question","p","i","AgeStep_AgeStep","includes","bind","extra","Question","recordAnswerAndStep","add_answer","del_answers","Result","result","resultClass","html","Status","steps","count","classes","DanmarkTesten","startTest","assertThisInitialized","filter","e","next_step","json","questions","deps","depends","met_deps","dep","operator","findScores","scores","first_answer","Array","isArray","prelim_answers","q","sub","reduce","sum","getResult","results","up_to","in","goBack","get","then","data","catch","warn","status_step","ReactDOM","render","src_DanmarkTesten","document","getElementById"],"mappings":"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","file":"static/js/main.fe106d6b.chunk.js","sourcesContent":["export const STATE_INITIAL = {\n  given_answers: [],\n  step: 0,\n  history: []\n}\n\nexport const STATE_TEST_STARTED = {\n  given_answers: [],\n  step: 1\n}\n","import { STATE_TEST_STARTED } from './constants'\n\nexport const historyRecord = (instance, history) => {\n  const score = instance.calcScore(history.given_answers)\n  // Add current score to history for debugging.\n  const historyWithScore = { ...history, ...{ score } }\n\n  if (instance.isDebugging()) {\n    console.group('historyRecord')\n    for (const property in historyWithScore) {\n      console.log(property, historyWithScore[property])\n    }\n    console.groupEnd('historyRecord')\n  }\n\n  // \"Record actions\" by adding element to history.\n  instance.setState({ history: [...instance.state.history, historyWithScore] })\n}\n\nexport const historyGoBack = (instance) => {\n  let history = [...instance.state.history]\n  // Skip last entry because we go back in time.\n  history.pop()\n  // If history is totally emptied\n  // make sure that its set to test start (step 1).\n  history = history.length ? history : STATE_TEST_STARTED\n  // Get last entry from history (which was the previous user choice).\n  const formerHistoryElement = history[history.length - 1]\n\n  if (instance.isDebugging()) {\n    console.group('historyGoBack')\n    for (const property in formerHistoryElement) {\n      console.log(property, formerHistoryElement[property])\n    }\n    console.groupEnd('historyGoBack')\n  }\n\n  // Delete score from state object.\n  // We dont want to set it in state\n  // since application handles that in calcScore().\n  const { score, ...historyElementWithoutScore } = formerHistoryElement\n\n  // Rewind both history and state to previous step.\n  instance.setState({ ...{ history }, ...historyElementWithoutScore })\n}\n","export const jsonUrl = (quiz) => {\n  switch (process.env.NODE_ENV) {\n    case 'development':\n      return `http://localhost:3000/${quiz}.json`\n\n    case 'production':\n    default:\n      return `/api/${quiz}`\n  }\n}\n","import React, { Component, Fragment } from 'react';\nimport renderHTML from 'react-render-html';\nimport { find } from 'lodash';\n\n//------------------- AgeStep ------------------------------\nexport class AgeStep extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n        let intervals = [];\n        props.answers.forEach(answer => {\n            let res = answer.text.split(\"-\");\n            intervals.push({\n                from: res[0],\n                to: res[1],\n                id: answer.answer_id\n            });\n        });\n        const answer_ids = props.answers.map((a) => a.answer_id);\n        this.state = { age: '', intervals, answer_ids, showMessage: false};\n\t}\n\n    handleChange = (event) => {\n        this.setState({\n            age: parseInt(event.target.value),\n            showMessage: false\n        });\n    };\n\n    handleNext = (event) => {\n        const age = this.state.age;\n        if (age < 16) {\n            this.setState({showMessage: true});\n            return;\n        }\n\n        let answer = find(this.state.intervals, function(element) {\n            return  age >= element.from && age <= element.to;\n        });\n\n        this.props.nextStep(answer.id, this.state.answer_ids);\n\n     };\n\n    render() {\n        const buttonClass = this.state.showMessage ? 'next disabled' : 'next';\n        return (\n            <div className=\"age-step\">\n                <label htmlFor=\"age\">Indtast alder:</label>\n                <input name=\"age\" type=\"number\" value={this.state.age} onChange={this.handleChange} />\n                <button className={buttonClass} onClick={this.handleNext}>Næste</button>\n                { this.state.showMessage && this.props.message &&\n                    <div className=\"message\">\n                    { renderHTML(this.props.message) }\n                    </div>\n                }\n            </div>\n        );\n\t}\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport renderHTML from 'react-render-html';\nimport './main.css';\nimport { historyRecord, historyGoBack } from './includes/history';\nimport { jsonUrl } from './includes/common';\nimport { STATE_INITIAL, STATE_TEST_STARTED } from './includes/constants'\nimport { AgeStep } from './AgeStep';\n\nvar axios = require('axios');\n\n//------------------- FadeTransition ------------------------------\nconst FadeTransition = (props) => {\n\tconst extendedChildren = React.Children.map(props.children, (child) => {\n    return child.props.className ? React.cloneElement(\n      child,\n      {\n        className: child.props.className + ' fade-in',\n      }\n    ) : child;\n  });\n\n\treturn (\n\t\t<div>\n\t\t\t{extendedChildren}\n\t\t</div>\n\t);\n}\nFadeTransition.propTypes = {\n};\n\n//------------------- Loading ------------------------------\n\nfunction Loading(props) {\n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t\t<p>Henter data...</p>\n\t\t</FadeTransition>\n\t);\n}\nLoading.propTypes = {\n};\n\n//------------------- TestIntro ------------------------------\n\nfunction TestIntro(props) {\n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t<div className=\"test-wrapper--intro\">\n\t\t\t{renderHTML(props.intro)}\n\t\t\t<button onClick={props.start}>Start testen</button>\n\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\nTestIntro.propTypes = {\n\tintro: PropTypes.string.isRequired,\n\tstart: PropTypes.func.isRequired\n};\n\n//------------------- TestStep ------------------------------\n\nfunction TestStep(props) {\n\tvar step = props.step;\n\tvar info = props.info;\n\tvar onClick = props.onClick;\n\tvar answered = props.answered;\n\tvar answers_for_this_question = info.answers.map((a) => a.answer_id);\n\n\treturn (\n\t\t<div className=\"test-wrapper--step\">\n\t\t\t<h2>{info.question}</h2>\n\t\t\t{info.text && info.text.map(\n\t\t\t\t(p,i) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<p key={i}>{p}</p>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t)}\n\n\t\t\t{\n\t\t\t\tstep === 1 && <AgeStep answers={info.answers} nextStep={onClick} message={info.message}/>\n\t\t\t}\n\n\t\t\t{step > 1 && info.answers && info.answers.map(\n\t\t\t\t(answer) => {\n\t\t\t\t\tvar className;\n\t\t\t\t\tif (answered.includes(answer.answer_id)) className = \"active\";\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={answer.answer_id}>\n\t\t\t\t\t\t  <button className={className} onClick={onClick.bind(null,answer.answer_id, answers_for_this_question)}>{answer.text}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t)}\n\t\t\t{info.extra && renderHTML(info.extra)}\n\t\t</div>\n\t);\n}\nTestStep.propTypes = {\n\tinfo: PropTypes.object.isRequired,\n\tonClick: PropTypes.func.isRequired,\n\tanswered: PropTypes.array.isRequired\n};\n\n//------------------- Question ------------------------------\n\nfunction Question(props) {\n\tvar step          = props.step;\n\tvar question      = props.question;\n\tvar given_answers = props.given_answers;\n\tvar recordAnswerAndStep = props.recordAnswerAndStep;\n\tlet onClick       = (add_answer, del_answers) => {\n\t\trecordAnswerAndStep(add_answer, del_answers);\n\t};\n\n\treturn (\n    <FadeTransition {...props}>\n\t\t\t<div className=\"Question\">\n\t\t\t  <TestStep step={step} info={question} onClick={onClick} answered={given_answers}/>\n\t\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\n\nQuestion.propTypes = {\n\tquestion: PropTypes.object.isRequired,\n\tgiven_answers: PropTypes.array.isRequired,\n\trecordAnswerAndStep: PropTypes.func.isRequired,\n\tstep: PropTypes.number.isRequired\n};\n\n//------------------- Result ------------------------------\n\nfunction Result(props) {\n\tconst { result } = props;\n\tconst resultClass = `result result__group--${result.group}`;\n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t\t<div className=\"test-wrapper--result\">\n\t\t\t\t<div className={resultClass}>\n\t\t\t\t\t{renderHTML(result.html)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\nResult.propTypes = {\n\tresult:  PropTypes.object.isRequired\n};\n\n//------------------- Status ------------------------------\n\nfunction Status(props) {\n\tvar steps = [];\n\tfor (let i = 0; i < props.count; ++i) {\n\t\tsteps[i] = \"\";\n\t}\n\tfor (let i = 0; i < props.step-1; ++i) {\n\t\tsteps[i] += 'seen ';\n\t}\n\tsteps[props.step  - 1] += 'active ';\n\tsteps[props.count - 1] += 'final ';\n\treturn (\n\t\t<ul className=\"test-wrapper--status\">\n\t\t\t{steps.map(function(classes,i) {\n\t\t\t\treturn (<li key={i} className={classes}><i></i></li>);\n\t\t\t})}\n\t\t</ul>\n\t);\n}\nStatus.propTypes = {\n\tstep:  PropTypes.number.isRequired,\n\tcount: PropTypes.number.isRequired\n};\n\n//------------------- DanmarkTesten ------------------------------\n\nclass DanmarkTesten extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tif (props.json) { // test inject\n\t\t\tthis.state = {\n\t\t\t\t...STATE_INITIAL,\n\t\t\t\t...{\n\t\t\t\t\tsteps: props.json.questions[props.json.questions.length - 1].step + 1,\n\t\t\t\t\tcount: props.json.questions.length + 1,\n\t\t\t\t\tjson: props.json,\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tthis.state = STATE_INITIAL;\n\n\t\t\taxios.get(jsonUrl(this.props.quiz)).then((res) => {\n\t\t\t\tvar json = res.data;\n\t\t\t\tthis.setState(() => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tsteps: json.questions[json.questions.length - 1].step+1,\n\t\t\t\t\t\tcount: json.questions.length + 1,\n\t\t\t\t\t\tjson:  json\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}).catch((e) => {\n\t\t\t\tif (console.warn) console.warn(e);\n\t\t\t});\n\n\t\t}\n\t}\n\n\tstartTest = () => {\n\t\tthis.setState(() => {\n\t\t\treturn { step: 1 };\n\t\t});\n\t\thistoryRecord(this, STATE_TEST_STARTED);\n\t};\n\n\trecordAnswerAndStep = (answer, del_answers) => {\n\t\tlet given_answers = this.state.given_answers.filter((e) => !del_answers.includes(e));\n\n\t\tgiven_answers.push(answer);\n\n\t\tlet res = { given_answers };\n\n\t\tif (this.calcScore(given_answers) < 0) {\n\t\t\tres.step = this.state.count;\n\n\t\t\thistoryRecord(this, {\n\t\t\t\tstep: res.step,\n\t\t\t\tgiven_answers: res.given_answers\n\t\t\t});\n\t\t\tthis.setState(res);\n\t\t\treturn;\n\t\t}\n\n\t\tlet step = 0;\n\n\t\tlet next_step = this.state.step + 1;\n\t\tif (next_step >= this.state.count) {\n\t\t\tstep = this.state.count;\n\t\t}\n\n\t\twhile(!step && next_step < this.state.count) {\n\t\t\tlet question = this.state.json.questions[next_step-1];\n\n\t\t\tlet deps = question.depends || [];\n\t\t\tif (!deps.length) {\n\t\t\t\tstep = next_step;\n\t\t\t} else {\n\t\t\t    let met_deps = 0;\n\t\t\t    deps.forEach((dep) => {\n\t\t\t\t    given_answers.forEach((answer) => {\n\t\t\t\t\t    if (dep === answer) {\n\t\t\t\t\t\t    ++met_deps;\n\t\t\t\t\t    }\n\t\t\t\t    });\n\t\t\t    });\n\n\t\t\t    if (0 < met_deps) {\n\t\t\t    \tif (question.operator && question.operator === 'or') {\n\t\t\t\t\t\tstep = next_step;\n\t\t\t    \t}\n\t\t\t    \tif (met_deps === deps.length) {\n\t\t\t\t\t\tstep = next_step;\n\t\t\t    \t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tnext_step++;\n\t\t}\n\n\t\tif (!step || step >= this.state.count) {\n\t\t\tstep = this.state.count;\n\t\t}\n\n\t\tres.step = step;\n\n\t\thistoryRecord(this, {\n\t\t\tstep: res.step,\n\t\t\tgiven_answers: res.given_answers\n\t\t});\n\t\tthis.setState(res);\n\t};\n\n\tfindScores = (scores, answers, first_answer) => {\n\t\tfor (let i = 0; i < answers.length; ++i) {\n\t\t\tlet a = answers[i];\n\t\t\tscores[ a.answer_id ] = Array.isArray(a.score) ? a.score[ first_answer ] : a.score;\n\t\t}\n\t\treturn scores;\n\t};\n\n\tcalcScore = (prelim_answers) => {\n\t\tif (!this.state.json) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet given_answers = prelim_answers || this.state.given_answers;\n\t\tlet questions = this.state.json.questions;\n\t\tlet scores = [];\n\t\tlet first_answer = given_answers[0] || 0;\n\t\tfor (let i = 0; i < questions.length; ++i) {\n\t\t\tlet q = questions[i];\n\t\t\tthis.findScores(scores, q.answers, first_answer);\n\t\t\tif (q.sub) {\n                q.sub.forEach((sub) => {\n\t\t\t\t    this.findScores(scores, sub.answers, first_answer);\n                });\n\t\t\t}\n\t\t}\n\t\tlet score = given_answers.reduce((sum, i) => sum + scores[i], 0);\n\t\treturn score;\n\t};\n\n\tgetResult = () => {\n\t\tvar score = this.calcScore();\n\t\tvar results = this.state.json.results;\n\t\tfor (var i = 0; i < results.length; ++i) {\n\t\t\tvar res = results[i];\n\t\t\tif (   (res.up_to && score < res.up_to)\n\t\t\t\t|| (res.in    && res.in.includes(score))\n\t\t\t\t|| (!res.in   && !res.up_to))\n\t\t\t{\n\t\t\t\treturn res;\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t};\n\n\tgoBack = () => historyGoBack(this);\n\n\tisDebugging = () => {\n\t\tif (process.env.NODE_ENV === 'production') {\n\t\t\treturn false\n\t\t}\n\n\t\treturn this.state.json !== undefined && this.state.json.debug\n\t}\n\n\trender() {\n\t\tlet status_step = 0;\n\t\tif (this.state.step)\n\t\t\tstatus_step = (this.state.step >= this.state.count) ?\n\t\t\t\tthis.state.steps :\n\t\t\t\tthis.state.json.questions[this.state.step-1].step;\n\n\t\tif (this.isDebugging()) {\n\t\t\tconsole.group('Current state');\n\t\t\tconsole.log('History', this.state.history);\n\t\t\tconsole.log('Current score', this.calcScore());\n\t\t\tconsole.log('State', this.state);\n\t\t\tconsole.groupEnd('Current state');\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"test-wrapper\">\n\t\t\t\t{1 < this.state.step\n\t\t\t\t\t&& <div className=\"button-back\" onClick={this.goBack}>Tilbage</div>\n\t\t\t\t}\n\t\t\t\t<div className=\"test-wrapper-body\">\n\t\t\t\t\t{0 === this.state.step && !this.state.json &&\n\t\t\t\t\t\t<Loading key=\"loading\" />\n\t\t\t\t\t}\n\t\t\t\t\t{0 === this.state.step && this.state.json &&\n\t\t\t\t\t\t<TestIntro\n\t\t\t\t\t\t\tkey=\"testintro\"\n\t\t\t\t\t\t\tintro={this.state.json.intro}\n\t\t\t\t\t\t\tstart={this.startTest}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step && this.state.step >= this.state.count &&\n\t\t\t\t\t\t<Result\n\t\t\t\t\t\t\tkey=\"result\"\n\t\t\t\t\t\t\tresult={this.getResult()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step && this.state.step < this.state.count &&\n\t\t\t\t\t\t<Question\n\t\t\t\t\t\t    step={ this.state.step }\n\t\t\t\t\t\t\tkey={\"question\" + this.state.step}\n\t\t\t\t\t\t\tquestion={this.state.json.questions[this.state.step - 1]}\n\t\t\t\t\t\t\tgiven_answers={this.state.given_answers}\n\t\t\t\t\t\t\trecordAnswerAndStep={this.recordAnswerAndStep}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step &&\n\t\t\t\t\t\t<Status\n\t\t\t\t\t\t\tkey=\"status\"\n\t\t\t\t\t\t\tstep={status_step}\n\t\t\t\t\t\t\tcount={this.state.steps}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nDanmarkTesten.propTypes = {\n\tquiz: PropTypes.string,\n\tjson: PropTypes.object\n};\n\nexport default DanmarkTesten;\n","import 'react-app-polyfill/ie11'; // For IE 11 support\nimport 'core-js/es7/array'\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport DanmarkTesten from './DanmarkTesten';\n\nReactDOM.render(<DanmarkTesten quiz=\"danmark-testen\" />, document.getElementById('danmark-testen'));\n//ReactDOM.render(<DanmarkTesten quiz=\"boerne-testen\" />, document.getElementById('boerne-testen'));\n"],"sourceRoot":""}