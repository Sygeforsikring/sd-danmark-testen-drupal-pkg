{"version":3,"sources":["includes/constants.js","includes/history.js","includes/common.js","helpers/siteImproveEventPush.js","AgeStep.js","ResultPage.js","DanmarkTesten.js","index.js"],"names":["STATE_INITIAL","given_answers","step","history","STATE_TEST_STARTED","historyRecord","instance","score","calcScore","historyWithScore","Object","objectSpread","isDebugging","property","console","group","log","groupEnd","setState","concat","toConsumableArray","state","historyGoBack","pop","formerHistoryElement","length","historyElementWithoutScore","objectWithoutProperties","jsonUrl","quiz","siteImproveEventPush","event","category","action","label","_sz","push","window","AgeStep","_Component","inherits","_super","_createSuper","props","_this","classCallCheck","this","call","componentDidMount","handleChange","age","parseInt","target","value","showMessage","handleNext","answer","find","intervals","element","from","to","nextStep","id","answer_ids","answers","forEach","res","text","split","answer_id","map","a","createClass","key","buttonClass","react_default","createElement","className","htmlFor","name","type","onChange","onClick","message","renderHTML","Component","ResultPage","ResultPage_createSuper","ref","current","querySelectorAll","link","addEventListener","componentWillUnmount","removeEventlistner","e","innerText","React","createRef","markup","axios","require","FadeTransition","extendedChildren","Children","children","child","cloneElement","Loading","DanmarkTesten_FadeTransition","TestIntro","intro","start","TestStep","info","answered","filteredAnswers","filter","undefined","includes","answers_for_this_question","question","AgeStep_AgeStep","bind","extra","Question","recordAnswerAndStep","add_answer","del_answers","Result","result","resultClass","ResultPage_ResultPage","html","Status","steps","i","count","classes","DanmarkTesten","startTest","assertThisInitialized","next_step","json","questions","deps","depends","met_deps","dep","operator","findScores","scores","first_answer","Array","isArray","prelim_answers","q","sub","reduce","sum","getResult","results","up_to","in","goBack","debug","get","then","data","catch","warn","status_step","ReactDOM","render","src_DanmarkTesten","document","getElementById"],"mappings":"kWAAaA,EAAgB,CAC3BC,cAAe,GACfC,KAAM,EACNC,QAAS,IAGEC,EAAqB,CAChCH,cAAe,GACfC,KAAM,GCNKG,EAAgB,SAACC,EAAUH,GACtC,IAAMI,EAAQD,EAASE,UAAUL,EAAQF,eAEnCQ,EAAgBC,OAAAC,EAAA,EAAAD,CAAA,GAAQP,EAAY,CAAEI,UAE5C,GAAID,EAASM,cAAe,CAE1B,IAAK,IAAMC,KADXC,QAAQC,MAAM,iBACSN,EACrBK,QAAQE,IAAIH,EAAUJ,EAAiBI,IAEzCC,QAAQG,SAAS,iBAInBX,EAASY,SAAS,CAAEf,QAAO,GAAAgB,OAAAT,OAAAU,EAAA,EAAAV,CAAMJ,EAASe,MAAMlB,SAArB,CAA8BM,OAG9Ca,EAAgB,SAAChB,GAC5B,IAAIH,EAAOO,OAAAU,EAAA,EAAAV,CAAOJ,EAASe,MAAMlB,SAEjCA,EAAQoB,MAKR,IAAMC,GAFNrB,EAAUA,EAAQsB,OAAStB,EAAUC,GAEAD,EAAQsB,OAAS,GAEtD,GAAInB,EAASM,cAAe,CAE1B,IAAK,IAAMC,KADXC,QAAQC,MAAM,iBACSS,EACrBV,QAAQE,IAAIH,EAAUW,EAAqBX,IAE7CC,QAAQG,SAAS,iBAM8BO,EAAzCjB,MArBiC,IAqBvBmB,EArBuBhB,OAAAiB,EAAA,EAAAjB,CAqBQc,EArBR,WAwBzClB,EAASY,SAATR,OAAAC,EAAA,EAAAD,CAAA,GAAuB,CAAEP,WAAcuB,KC3C5BE,EAAU,SAACC,GAOlB,cAAAV,OAAeU,ICNRC,EAAuB,SAACC,EAAOC,EAAUC,EAAQC,GAC5D,GAAmB,qBAARC,IASX,MALwB,oBAAbA,IAAIC,OACbD,IAAIC,KAAK,CAAC,QAASJ,EAAUC,EAAQC,IAErCG,OAAOvB,QAAQE,IAAf,gBAAAG,OAAmCe,KAE9BH,mcCLF,IAAMO,EAAb,SAAAC,GAAA7B,OAAA8B,EAAA,EAAA9B,CAAA4B,EAAAC,GAAA,IAAAE,EAAAC,EAAAJ,GACC,SAAAA,EAAYK,GAAO,IAAAC,EAAAlC,OAAAmC,EAAA,EAAAnC,CAAAoC,KAAAR,IAClBM,EAAAH,EAAAM,KAAAD,KAAMH,IAeNK,kBAAoB,WAClBlB,EACE,KACA,iBACA,gBACA,+BArBcc,EAyBhBK,aAAe,SAAClB,GACZa,EAAK1B,SAAS,CACVgC,IAAKC,SAASpB,EAAMqB,OAAOC,OAC3BC,aAAa,KA5BLV,EAgChBW,WAAa,SAACxB,GACV,IAAMmB,EAAMN,EAAKvB,MAAM6B,IACvB,GAAIA,EAAM,IAAMA,EAAM,GAQlB,OAPAN,EAAK1B,SAAS,CAACoC,aAAa,SAC5BxB,EACE,KACA,iBACA,kBACA,wCAKN,IAAI0B,EAASC,eAAKb,EAAKvB,MAAMqC,UAAW,SAASC,GAC7C,OAAQT,GAAOS,EAAQC,MAAQV,GAAOS,EAAQE,KAGlDjB,EAAKD,MAAMmB,SAASN,EAAOO,GAAInB,EAAKvB,MAAM2C,aA9C1C,IAAIN,EAAY,GAChBf,EAAMsB,QAAQC,QAAQ,SAAAV,GAClB,IAAIW,EAAMX,EAAOY,KAAKC,MAAM,KAC5BX,EAAUtB,KAAK,CACXwB,KAAMO,EAAI,GACVN,GAAIM,EAAI,GACRJ,GAAIP,EAAOc,cAGnB,IAAMN,EAAarB,EAAMsB,QAAQM,IAAI,SAACC,GAAD,OAAOA,EAAEF,YAZlC,OAaZ1B,EAAKvB,MAAQ,CAAE6B,IAAK,GAAIQ,YAAWM,aAAYV,aAAa,GAbhDV,EADpB,OAAAlC,OAAA+D,EAAA,EAAA/D,CAAA4B,EAAA,EAAAoC,IAAA,SAAArB,MAAA,WAuDQ,IAAMsB,EAAc7B,KAAKzB,MAAMiC,YAAc,gBAAkB,OAC/D,OACIsB,EAAAJ,EAAAK,cAAA,OAAKC,UAAU,YACXF,EAAAJ,EAAAK,cAAA,SAAOE,QAAQ,OAAf,kBACAH,EAAAJ,EAAAK,cAAA,SAAOG,KAAK,MAAMC,KAAK,SAAS5B,MAAOP,KAAKzB,MAAM6B,IAAKgC,SAAUpC,KAAKG,eACtE2B,EAAAJ,EAAAK,cAAA,UAAQC,UAAWH,EAAaQ,QAASrC,KAAKS,YAA9C,YACET,KAAKzB,MAAMiC,aAAeR,KAAKH,MAAMyC,SACnCR,EAAAJ,EAAAK,cAAA,OAAKC,UAAU,WACbO,IAAWvC,KAAKH,MAAMyC,eA/D5C9C,EAAA,CAA6BgD,6cCDtB,IAAMC,EAAb,SAAAhD,GAAA7B,OAAA8B,EAAA,EAAA9B,CAAA6E,EAAAhD,GAAA,IAAAE,EAAA+C,EAAAD,GACE,SAAAA,EAAY5C,GAAO,IAAAC,EAAA,OAAAlC,OAAAmC,EAAA,EAAAnC,CAAAoC,KAAAyC,IACjB3C,EAAAH,EAAAM,KAAAD,KAAMH,IAIRK,kBAAoB,WAClBlB,EACE,KACA,iBACA,kBAHkB,oCAAAX,OAIkByB,EAAKD,MAAM5B,QAGjD6B,EAAK6C,IAAIC,QAAQC,iBAAiB,KAAKzB,QAAQ,SAAA0B,GAAI,OACjDA,EAAKC,iBAAiB,QAASjD,EAAKuC,SAAS,MAd9BvC,EAkBnBkD,qBAAuB,WACrBlD,EAAK6C,IAAIC,QAAQC,iBAAiB,KAAKzB,QAAQ,SAAA0B,GAAI,OACjDA,EAAKG,mBAAmB,QAASnD,EAAKuC,SAAS,MApBhCvC,EAwBnBuC,QAAU,SAACa,GACT,IAAMjF,EAAQ6B,EAAKD,MAAM5B,MACnBqD,EAAO4B,EAAE5C,OAAO6C,UACtBnE,EACE,KACA,iBAFkB,SAAAX,OAGTiD,GAHS,gBAAAjD,OAIFiD,EAJE,gCAAAjD,OAIiCJ,KA7BrD6B,EAAK6C,IAAMS,IAAMC,YAFAvD,EADrB,OAAAlC,OAAA+D,EAAA,EAAA/D,CAAA6E,EAAA,EAAAb,IAAA,SAAArB,MAAA,WAqCI,OACEuB,EAAAJ,EAAAK,cAAA,OAAKC,UAAWhC,KAAKH,MAAMmC,UAAWW,IAAK3C,KAAK2C,KAC7CJ,IAAWvC,KAAKH,MAAMyD,aAvC/Bb,EAAA,CAAgCD,6cCMhC,IAAIe,EAAQC,EAAQ,KAGdC,EAAiB,SAAC5D,GACvB,IAAM6D,EAAmBN,IAAMO,SAASlC,IAAI5B,EAAM+D,SAAU,SAACC,GAC1D,OAAOA,EAAMhE,MAAMmC,UAAYoB,IAAMU,aACnCD,EACA,CACE7B,UAAW6B,EAAMhE,MAAMmC,UAAY,aAEnC6B,IAGP,OACC/B,EAAAJ,EAAAK,cAAA,WACE2B,IASJ,SAASK,EAAQlE,GAChB,OACCiC,EAAAJ,EAAAK,cAACiC,EAAmBnE,EACnBiC,EAAAJ,EAAAK,cAAA,4BASH,SAASkC,EAAUpE,GAClB,OACCiC,EAAAJ,EAAAK,cAACiC,EAAmBnE,EACpBiC,EAAAJ,EAAAK,cAAA,OAAKC,UAAU,uBACdF,EAAAJ,EAAAK,cAAA,OAAKC,UAAU,qCACdO,IAAW1C,EAAMqE,OAClBpC,EAAAJ,EAAAK,cAAA,UAAQM,QAASxC,EAAMsE,OAAvB,kBAYH,SAASC,EAASvE,GACjB,IAAIzC,EAAOyC,EAAMzC,KACbiH,EAAOxE,EAAMwE,KACbhC,EAAUxC,EAAMwC,QAChBiC,EAAWzE,EAAMyE,SAEflE,EAAMkE,EAAS3F,OAAS,EAAI2F,EAAS,GAAK,KAC1CC,EAAkBC,iBAAOH,EAAKlD,QAAS,SAAST,GACrD,YAAsB+D,IAAf/D,EAAON,KAAoC,OAAfM,EAAON,KAAgBsE,mBAAShE,EAAON,IAAKA,IAC7EA,GAECuE,EAA4BJ,EAAgB9C,IAAI,SAACC,GAAD,OAAOA,EAAEF,YAE7D,OACCM,EAAAJ,EAAAK,cAAA,OAAKC,UAAU,sBACdF,EAAAJ,EAAAK,cAAA,UAAKsC,EAAKO,UACTP,EAAK/C,MAAQiB,IAAW8B,EAAK/C,MAGpB,IAATlE,GAAc0E,EAAAJ,EAAAK,cAAC8C,EAAD,CAAS1D,QAASkD,EAAKlD,QAASH,SAAUqB,EAASC,QAAS+B,EAAK/B,UAG/ElF,EAAO,GAAKmH,EAAgB9C,IAC5B,SAACf,GACA,IAAIsB,EAEJ,OADIsC,EAASI,SAAShE,EAAOc,aAAYQ,EAAY,UAEpDF,EAAAJ,EAAAK,cAAA,OAAKH,IAAKlB,EAAOc,WACfM,EAAAJ,EAAAK,cAAA,UAAQC,UAAWA,EAAWK,QAASA,EAAQyC,KAAK,KAAKpE,EAAOc,UAAWmD,IAA6BjE,EAAOY,SAKnH+C,EAAKU,OAASxC,IAAW8B,EAAKU,QAYlC,SAASC,EAASnF,GACjB,IAAIzC,EAAgByC,EAAMzC,KACtBwH,EAAgB/E,EAAM+E,SACtBzH,EAAgB0C,EAAM1C,cACtB8H,EAAsBpF,EAAMoF,oBAKhC,OACGnD,EAAAJ,EAAAK,cAACiC,EAAmBnE,EACrBiC,EAAAJ,EAAAK,cAAA,OAAKC,UAAU,YACbF,EAAAJ,EAAAK,cAACqC,EAAD,CAAUhH,KAAMA,EAAMiH,KAAMO,EAAUvC,QAPtB,SAAC6C,EAAYC,GAChCF,EAAoBC,EAAYC,IAM2Bb,SAAUnH,MAevE,SAASiI,EAAOvF,GAAO,IACdwF,EAAWxF,EAAXwF,OACDC,EAAW,yBAAAjH,OAA4BgH,EAAOpH,OAErD,OACC6D,EAAAJ,EAAAK,cAACiC,EAAmBnE,EACnBiC,EAAAJ,EAAAK,cAAA,OAAKC,UAAU,wBACVF,EAAAJ,EAAAK,cAACwD,EAAD,CAAYvD,UAAWsD,EAAahC,OAAQ+B,EAAOG,KAAMvH,MAAOoH,EAAOpH,UAW/E,SAASwH,EAAO5F,GAEf,IADA,IAAI6F,EAAQ,GACHC,EAAI,EAAGA,EAAI9F,EAAM+F,QAASD,EAClCD,EAAMC,GAAK,GAEZ,IAAK,IAAIA,EAAI,EAAGA,EAAI9F,EAAMzC,KAAK,IAAKuI,EACnCD,EAAMC,IAAM,QAIb,OAFAD,EAAM7F,EAAMzC,KAAQ,IAAM,UAC1BsI,EAAM7F,EAAM+F,MAAQ,IAAM,SAEzB9D,EAAAJ,EAAAK,cAAA,MAAIC,UAAU,wBACZ0D,EAAMjE,IAAI,SAASoE,EAAQF,GAC3B,OAAQ7D,EAAAJ,EAAAK,cAAA,MAAIH,IAAK+D,EAAG3D,UAAW6D,GAAS/D,EAAAJ,EAAAK,cAAA,kBAuO7B+D,0CA1Nd,SAAAA,EAAYjG,GAAO,IAAAC,EAAA,OAAAlC,OAAAmC,EAAA,EAAAnC,CAAAoC,KAAA8F,IAClBhG,EAAAH,EAAAM,KAAAD,KAAMH,IA+BPkG,UAAY,WACXjG,EAAK1B,SAAS,WACb,MAAO,CAAEhB,KAAM,KAEhBG,EAAcK,OAAAoI,EAAA,EAAApI,CAAAkC,GAAMxC,IApCFwC,EAuCnBmF,oBAAsB,SAACvE,EAAQyE,GAC9B,IAAIhI,EAAgB2C,EAAKvB,MAAMpB,cAAcqH,OAAO,SAACtB,GAAD,OAAQiC,EAAYT,SAASxB,KAEjF/F,EAAcmC,KAAKoB,GAEnB,IAAIW,EAAM,CAAElE,iBAEZ,GAAI2C,EAAKpC,UAAUP,GAAiB,EAQnC,OAPAkE,EAAIjE,KAAO0C,EAAKvB,MAAMqH,MAEtBrI,EAAcK,OAAAoI,EAAA,EAAApI,CAAAkC,GAAM,CACnB1C,KAAMiE,EAAIjE,KACVD,cAAekE,EAAIlE,qBAEpB2C,EAAK1B,SAASiD,GAIf,IAAIjE,EAAO,EAEP6I,EAAYnG,EAAKvB,MAAMnB,KAAO,EAKlC,IAJI6I,GAAanG,EAAKvB,MAAMqH,QAC3BxI,EAAO0C,EAAKvB,MAAMqH,QAGZxI,GAAQ6I,EAAYnG,EAAKvB,MAAMqH,OAAO,CAC5C,IAAIhB,EAAW9E,EAAKvB,MAAM2H,KAAKC,UAAUF,EAAU,GAE/CG,EAAOxB,EAASyB,SAAW,GAC1BD,EAAKzH,OAEH,WACH,IAAI2H,EAAW,EACfF,EAAKhF,QAAQ,SAACmF,GACbpJ,EAAciE,QAAQ,SAACV,GAClB6F,IAAQ7F,KACT4F,MAKD,EAAIA,IACH1B,EAAS4B,UAAkC,OAAtB5B,EAAS4B,WACpCpJ,EAAO6I,GAEDK,IAAaF,EAAKzH,SACxBvB,EAAO6I,IAfH,GADN7I,EAAO6I,EAoBRA,MAGI7I,GAAQA,GAAQ0C,EAAKvB,MAAMqH,SAC/BxI,EAAO0C,EAAKvB,MAAMqH,OAGnBvE,EAAIjE,KAAOA,EAEXG,EAAcK,OAAAoI,EAAA,EAAApI,CAAAkC,GAAM,CACnB1C,KAAMiE,EAAIjE,KACVD,cAAekE,EAAIlE,gBAEpB2C,EAAK1B,SAASiD,IAtGIvB,EAyGnB2G,WAAa,SAACC,EAAQvF,EAASwF,GAC9B,IAAK,IAAIhB,EAAI,EAAGA,EAAIxE,EAAQxC,SAAUgH,EAAG,CACxC,IAAIjE,EAAIP,EAAQwE,GAChBe,EAAQhF,EAAEF,WAAcoF,MAAMC,QAAQnF,EAAEjE,OAASiE,EAAEjE,MAAOkJ,GAAiBjF,EAAEjE,MAE9E,OAAOiJ,GA9GW5G,EAiHnBpC,UAAY,SAACoJ,GACZ,IAAKhH,EAAKvB,MAAM2H,KACf,OAAO,EAOR,IAJA,IAAI/I,EAAgB2J,GAAkBhH,EAAKvB,MAAMpB,cAC7CgJ,EAAYrG,EAAKvB,MAAM2H,KAAKC,UAC5BO,EAAS,GACTC,EAAexJ,EAAc,IAAM,EAC9BwI,EAAI,EAAGA,EAAIQ,EAAUxH,SAAUgH,EAAG,CAC1C,IAAIoB,EAAIZ,EAAUR,GAClB7F,EAAK2G,WAAWC,EAAQK,EAAE5F,QAASwF,GAC/BI,EAAEC,KACOD,EAAEC,IAAI5F,QAAQ,SAAC4F,GACvBlH,EAAK2G,WAAWC,EAAQM,EAAI7F,QAASwF,KAK3C,OADYxJ,EAAc8J,OAAO,SAACC,EAAKvB,GAAN,OAAYuB,EAAMR,EAAOf,IAAI,IAnI5C7F,EAuInBqH,UAAY,WAGX,IAFA,IAAI1J,EAAQqC,EAAKpC,YACb0J,EAAUtH,EAAKvB,MAAM2H,KAAKkB,QACrBzB,EAAI,EAAGA,EAAIyB,EAAQzI,SAAUgH,EAAG,CACxC,IAAItE,EAAM+F,EAAQzB,GAClB,GAAQtE,EAAIgG,OAAS5J,EAAQ4D,EAAIgG,OAC5BhG,EAAIiG,IAASjG,EAAIiG,GAAG5C,SAASjH,KAC5B4D,EAAIiG,KAASjG,EAAIgG,MAEtB,OAAOhG,EAGT,MAAO,IAnJWvB,EAsJnByH,OAAS,kBAAM/I,EAAcZ,OAAAoI,EAAA,EAAApI,CAAAkC,KAtJVA,EAwJnBhC,YAAc,uBAA0B2G,IAApB3E,EAAKvB,MAAM2H,MAAsBpG,EAAKvB,MAAM2H,KAAKsB,OArJhE3H,EAAMqG,KACTpG,EAAKvB,MAALX,OAAAC,EAAA,EAAAD,CAAA,GACIV,EACA,CACFwI,MAAO7F,EAAMqG,KAAKC,UAAUtG,EAAMqG,KAAKC,UAAUxH,OAAS,GAAGvB,KAAO,EACpEwI,MAAO/F,EAAMqG,KAAKC,UAAUxH,OAAS,EACrCuH,KAAMrG,EAAMqG,QAKdpG,EAAKvB,MAAQrB,EAEbqG,EAAMkE,IAAI3I,EAAQgB,EAAKD,MAAMd,OAAO2I,KAAK,SAACrG,GACzC,IAAI6E,EAAO7E,EAAIsG,KACf7H,EAAK1B,SAAS,WACb,MAAO,CACNsH,MAAOQ,EAAKC,UAAUD,EAAKC,UAAUxH,OAAS,GAAGvB,KAAK,EACtDwI,MAAOM,EAAKC,UAAUxH,OAAS,EAC/BuH,KAAOA,OAGP0B,MAAM,SAAC1E,GACLlF,QAAQ6J,MAAM7J,QAAQ6J,KAAK3E,MA1BfpD,uDA2JlB,IAAIgI,EAAc,EAclB,OAbI9H,KAAKzB,MAAMnB,OACd0K,EAAe9H,KAAKzB,MAAMnB,MAAQ4C,KAAKzB,MAAMqH,MAC5C5F,KAAKzB,MAAMmH,MACX1F,KAAKzB,MAAM2H,KAAKC,UAAUnG,KAAKzB,MAAMnB,KAAK,GAAGA,MAE3C4C,KAAKlC,gBACRE,QAAQC,MAAM,iBACdD,QAAQE,IAAI,UAAW8B,KAAKzB,MAAMlB,SAClCW,QAAQE,IAAI,gBAAiB8B,KAAKtC,aAClCM,QAAQE,IAAI,QAAS8B,KAAKzB,OAC1BP,QAAQG,SAAS,kBAIjB2D,EAAAJ,EAAAK,cAAA,OAAKC,UAAU,gBACb,EAAIhC,KAAKzB,MAAMnB,MACZ0E,EAAAJ,EAAAK,cAAA,OAAKC,UAAU,cAAcK,QAASrC,KAAKuH,QAA3C,WAEJzF,EAAAJ,EAAAK,cAAA,OAAKC,UAAU,qBACb,IAAMhC,KAAKzB,MAAMnB,OAAS4C,KAAKzB,MAAM2H,MACrCpE,EAAAJ,EAAAK,cAACgC,EAAD,CAASnC,IAAI,YAEb,IAAM5B,KAAKzB,MAAMnB,MAAQ4C,KAAKzB,MAAM2H,MACpCpE,EAAAJ,EAAAK,cAACkC,EAAD,CACCrC,IAAI,YACJsC,MAAOlE,KAAKzB,MAAM2H,KAAKhC,MACvBC,MAAOnE,KAAK+F,YAGb,EAAI/F,KAAKzB,MAAMnB,MAAQ4C,KAAKzB,MAAMnB,MAAQ4C,KAAKzB,MAAMqH,OACrD9D,EAAAJ,EAAAK,cAACqD,EAAD,CACCxD,IAAI,SACJyD,OAAQrF,KAAKmH,cAGd,EAAInH,KAAKzB,MAAMnB,MAAQ4C,KAAKzB,MAAMnB,KAAO4C,KAAKzB,MAAMqH,OACpD9D,EAAAJ,EAAAK,cAACiD,EAAD,CACI5H,KAAO4C,KAAKzB,MAAMnB,KACrBwE,IAAK,WAAa5B,KAAKzB,MAAMnB,KAC7BwH,SAAU5E,KAAKzB,MAAM2H,KAAKC,UAAUnG,KAAKzB,MAAMnB,KAAO,GACtDD,cAAe6C,KAAKzB,MAAMpB,cAC1B8H,oBAAqBjF,KAAKiF,sBAG3B,EAAIjF,KAAKzB,MAAMnB,MACf0E,EAAAJ,EAAAK,cAAC0D,EAAD,CACC7D,IAAI,SACJxE,KAAM0K,EACNlC,MAAO5F,KAAKzB,MAAMmH,iBA7MGlD,aC9K5BuF,IAASC,OAAOlG,EAAAJ,EAAAK,cAACkG,EAAD,CAAelJ,KAAK,mBAAqBmJ,SAASC,eAAe","file":"static/js/main.f9440b16.chunk.js","sourcesContent":["export const STATE_INITIAL = {\n  given_answers: [],\n  step: 0,\n  history: []\n}\n\nexport const STATE_TEST_STARTED = {\n  given_answers: [],\n  step: 1\n}\n","import { STATE_TEST_STARTED } from './constants'\n\nexport const historyRecord = (instance, history) => {\n  const score = instance.calcScore(history.given_answers)\n  // Add current score to history for debugging.\n  const historyWithScore = { ...history, ...{ score } }\n\n  if (instance.isDebugging()) {\n    console.group('historyRecord')\n    for (const property in historyWithScore) {\n      console.log(property, historyWithScore[property])\n    }\n    console.groupEnd('historyRecord')\n  }\n\n  // \"Record actions\" by adding element to history.\n  instance.setState({ history: [...instance.state.history, historyWithScore] })\n}\n\nexport const historyGoBack = (instance) => {\n  let history = [...instance.state.history]\n  // Skip last entry because we go back in time.\n  history.pop()\n  // If history is totally emptied\n  // make sure that its set to test start (step 1).\n  history = history.length ? history : STATE_TEST_STARTED\n  // Get last entry from history (which was the previous user choice).\n  const formerHistoryElement = history[history.length - 1]\n\n  if (instance.isDebugging()) {\n    console.group('historyGoBack')\n    for (const property in formerHistoryElement) {\n      console.log(property, formerHistoryElement[property])\n    }\n    console.groupEnd('historyGoBack')\n  }\n\n  // Delete score from state object.\n  // We dont want to set it in state\n  // since application handles that in calcScore().\n  const { score, ...historyElementWithoutScore } = formerHistoryElement\n\n  // Rewind both history and state to previous step.\n  instance.setState({ ...{ history }, ...historyElementWithoutScore })\n}\n","export const jsonUrl = (quiz) => {\n  switch (process.env.NODE_ENV) {\n    case 'development':\n      return `http://localhost:3000/${quiz}.json`\n\n    case 'production':\n    default:\n      return `/api/${quiz}`\n  }\n}\n","/* eslint-disable */ \nexport const siteImproveEventPush = (event, category, action, label) => {\n  if (typeof _sz === 'undefined') {\n    return;\n  }\n  \n  if (typeof _sz.push === 'function') {\n    _sz.push(['event', category, action, label]);\n    // TODO: Remove before releasing\n    window.console.log(`Siteimprove: ${label}`);\n  }\n  return event;\n};\n/* eslint-enable */","import React, { Component } from 'react';\nimport renderHTML from 'react-render-html';\nimport { find } from 'lodash';\nimport { siteImproveEventPush } from './helpers/siteImproveEventPush';\n\n//------------------- AgeStep ------------------------------\nexport class AgeStep extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n        let intervals = [];\n        props.answers.forEach(answer => {\n            let res = answer.text.split(\"-\");\n            intervals.push({\n                from: res[0],\n                to: res[1],\n                id: answer.answer_id\n            });\n        });\n        const answer_ids = props.answers.map((a) => a.answer_id);\n        this.state = { age: '', intervals, answer_ids, showMessage: false};\n  }\n  \n  componentDidMount = () => {\n    siteImproveEventPush(\n      null,\n      'danmark testen',\n      'Load Age step',\n      'User continued to age step'\n    )\n  }\n\n    handleChange = (event) => {\n        this.setState({\n            age: parseInt(event.target.value),\n            showMessage: false\n        });\n    };\n\n    handleNext = (event) => {\n        const age = this.state.age;\n        if (age < 16 || age > 59) {\n            this.setState({showMessage: true});\n            siteImproveEventPush(\n              null,\n              'danmark testen',\n              'Age input error',\n              'User gets an error on enter age step'\n            )\n            return;\n        }\n\n        let answer = find(this.state.intervals, function(element) {\n            return  age >= element.from && age <= element.to;\n        });\n\n        this.props.nextStep(answer.id, this.state.answer_ids);\n\n     };\n\n    render() {\n        const buttonClass = this.state.showMessage ? 'next disabled' : 'next';\n        return (\n            <div className=\"age-step\">\n                <label htmlFor=\"age\">Indtast alder:</label>\n                <input name=\"age\" type=\"number\" value={this.state.age} onChange={this.handleChange} />\n                <button className={buttonClass} onClick={this.handleNext}>NÃ¦ste</button>\n                { this.state.showMessage && this.props.message &&\n                    <div className=\"message\">\n                    { renderHTML(this.props.message) }\n                    </div>\n                }\n            </div>\n        );\n\t}\n}\n","import React, { Component } from 'react';\nimport renderHTML from 'react-render-html';\nimport { siteImproveEventPush } from './helpers/siteImproveEventPush';\n\n//------------------- Result page ------------------------------\nexport class ResultPage extends Component {\n  constructor(props) {\n    super(props);\n    this.ref = React.createRef();\n  }\n  \n  componentDidMount = () => {\n    siteImproveEventPush(\n      null,\n      'danmark testen',\n      'Load resultpage',\n      `User loads resultpage for group: ${this.props.group}`\n    )\n\n    this.ref.current.querySelectorAll('a').forEach(link =>\n      link.addEventListener('click', this.onClick, false)\n    );\n  };\n\n  componentWillUnmount = () => {\n    this.ref.current.querySelectorAll('a').forEach(link =>\n      link.removeEventlistner('click', this.onClick, false)\n    );\n  }\n\n  onClick = (e) => {\n    const group = this.props.group;\n    const text = e.target.innerText;\n    siteImproveEventPush(\n      null,\n      'danmark testen',\n      `Click ${text}`,\n      `User clicked ${text} from resultpage for group: ${group}`\n    )\n  };\n\n  render() {\n    return (\n      <div className={this.props.className} ref={this.ref}>\n        {renderHTML(this.props.markup)}\n      </div>\n    );\n\t}\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport renderHTML from 'react-render-html';\nimport {filter, includes} from 'lodash';\nimport './main.css';\nimport { historyRecord, historyGoBack } from './includes/history';\nimport { jsonUrl } from './includes/common';\nimport { STATE_INITIAL, STATE_TEST_STARTED } from './includes/constants'\nimport { AgeStep } from './AgeStep';\nimport { ResultPage } from './ResultPage';\n\nvar axios = require('axios');\n\n//------------------- FadeTransition ------------------------------\nconst FadeTransition = (props) => {\n\tconst extendedChildren = React.Children.map(props.children, (child) => {\n    return child.props.className ? React.cloneElement(\n      child,\n      {\n        className: child.props.className + ' fade-in',\n      }\n    ) : child;\n  });\n\n\treturn (\n\t\t<div>\n\t\t\t{extendedChildren}\n\t\t</div>\n\t);\n}\nFadeTransition.propTypes = {\n};\n\n//------------------- Loading ------------------------------\n\nfunction Loading(props) {\n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t\t<p>Henter data...</p>\n\t\t</FadeTransition>\n\t);\n}\nLoading.propTypes = {\n};\n\n//------------------- TestIntro ------------------------------\n\nfunction TestIntro(props) {\n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t<div className=\"test-wrapper--intro\">\n\t\t\t<div className=\"test-wrapper--intro-illustration\" />\n\t\t\t{renderHTML(props.intro)}\n\t\t\t<button onClick={props.start}>Start testen</button>\n\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\nTestIntro.propTypes = {\n\tintro: PropTypes.string.isRequired,\n\tstart: PropTypes.func.isRequired\n};\n\n//------------------- TestStep ------------------------------\n\nfunction TestStep(props) {\n\tvar step = props.step;\n\tvar info = props.info;\n\tvar onClick = props.onClick;\n\tvar answered = props.answered;\n\n\tconst age = answered.length > 0 ? answered[0] : null;\n\tconst filteredAnswers = filter(info.answers, function(answer) {\n\t\treturn answer.age === undefined || answer.age === null || includes(answer.age, age);\n\t}, age);\n\n\tvar answers_for_this_question = filteredAnswers.map((a) => a.answer_id);\n\n\treturn (\n\t\t<div className=\"test-wrapper--step\">\n\t\t\t<h2>{info.question}</h2>\n\t\t\t{info.text && renderHTML(info.text)}\n\n\t\t\t{\n\t\t\t\tstep === 1 && <AgeStep answers={info.answers} nextStep={onClick} message={info.message}/>\n\t\t\t}\n\n\t\t\t{step > 1 && filteredAnswers.map(\n\t\t\t\t(answer) => {\n\t\t\t\t\tvar className;\n\t\t\t\t\tif (answered.includes(answer.answer_id)) className = \"active\";\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={answer.answer_id}>\n\t\t\t\t\t\t  <button className={className} onClick={onClick.bind(null,answer.answer_id, answers_for_this_question)}>{answer.text}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t)}\n\t\t\t{info.extra && renderHTML(info.extra)}\n\t\t</div>\n\t);\n}\nTestStep.propTypes = {\n\tinfo: PropTypes.object.isRequired,\n\tonClick: PropTypes.func.isRequired,\n\tanswered: PropTypes.array.isRequired\n};\n\n//------------------- Question ------------------------------\n\nfunction Question(props) {\n\tvar step          = props.step;\n\tvar question      = props.question;\n\tvar given_answers = props.given_answers;\n\tvar recordAnswerAndStep = props.recordAnswerAndStep;\n\tlet onClick       = (add_answer, del_answers) => {\n\t\trecordAnswerAndStep(add_answer, del_answers);\n\t};\n\n\treturn (\n    <FadeTransition {...props}>\n\t\t\t<div className=\"Question\">\n\t\t\t  <TestStep step={step} info={question} onClick={onClick} answered={given_answers}/>\n\t\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\n\nQuestion.propTypes = {\n\tquestion: PropTypes.object.isRequired,\n\tgiven_answers: PropTypes.array.isRequired,\n\trecordAnswerAndStep: PropTypes.func.isRequired,\n\tstep: PropTypes.number.isRequired\n};\n\n//------------------- Result ------------------------------\n\nfunction Result(props) {\n\tconst { result } = props;\n  const resultClass = `result result__group--${result.group}`;\n  \n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t\t<div className=\"test-wrapper--result\">\n        <ResultPage className={resultClass} markup={result.html} group={result.group} />\n\t\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\nResult.propTypes = {\n\tresult:  PropTypes.object.isRequired\n};\n\n//------------------- Status ------------------------------\n\nfunction Status(props) {\n\tvar steps = [];\n\tfor (let i = 0; i < props.count; ++i) {\n\t\tsteps[i] = \"\";\n\t}\n\tfor (let i = 0; i < props.step-1; ++i) {\n\t\tsteps[i] += 'seen ';\n\t}\n\tsteps[props.step  - 1] += 'active ';\n\tsteps[props.count - 1] += 'final ';\n\treturn (\n\t\t<ul className=\"test-wrapper--status\">\n\t\t\t{steps.map(function(classes,i) {\n\t\t\t\treturn (<li key={i} className={classes}><i></i></li>);\n\t\t\t})}\n\t\t</ul>\n\t);\n}\nStatus.propTypes = {\n\tstep:  PropTypes.number.isRequired,\n\tcount: PropTypes.number.isRequired\n};\n\n//------------------- DanmarkTesten ------------------------------\n\nclass DanmarkTesten extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tif (props.json) { // test inject\n\t\t\tthis.state = {\n\t\t\t\t...STATE_INITIAL,\n\t\t\t\t...{\n\t\t\t\t\tsteps: props.json.questions[props.json.questions.length - 1].step + 1,\n\t\t\t\t\tcount: props.json.questions.length + 1,\n\t\t\t\t\tjson: props.json,\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tthis.state = STATE_INITIAL;\n\n\t\t\taxios.get(jsonUrl(this.props.quiz)).then((res) => {\n\t\t\t\tvar json = res.data;\n\t\t\t\tthis.setState(() => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tsteps: json.questions[json.questions.length - 1].step+1,\n\t\t\t\t\t\tcount: json.questions.length + 1,\n\t\t\t\t\t\tjson:  json\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}).catch((e) => {\n\t\t\t\tif (console.warn) console.warn(e);\n\t\t\t});\n\n\t\t}\n\t}\n\n\tstartTest = () => {\n\t\tthis.setState(() => {\n\t\t\treturn { step: 1 };\n\t\t});\n\t\thistoryRecord(this, STATE_TEST_STARTED);\n\t};\n\n\trecordAnswerAndStep = (answer, del_answers) => {\n\t\tlet given_answers = this.state.given_answers.filter((e) => !del_answers.includes(e));\n\n\t\tgiven_answers.push(answer);\n\n\t\tlet res = { given_answers };\n\n\t\tif (this.calcScore(given_answers) < 0) {\n\t\t\tres.step = this.state.count;\n\n\t\t\thistoryRecord(this, {\n\t\t\t\tstep: res.step,\n\t\t\t\tgiven_answers: res.given_answers\n\t\t\t});\n\t\t\tthis.setState(res);\n\t\t\treturn;\n\t\t}\n\n\t\tlet step = 0;\n\n\t\tlet next_step = this.state.step + 1;\n\t\tif (next_step >= this.state.count) {\n\t\t\tstep = this.state.count;\n\t\t}\n\n\t\twhile(!step && next_step < this.state.count) {\n\t\t\tlet question = this.state.json.questions[next_step-1];\n\n\t\t\tlet deps = question.depends || [];\n\t\t\tif (!deps.length) {\n\t\t\t\tstep = next_step;\n\t\t\t} else {\n\t\t\t    let met_deps = 0;\n\t\t\t    deps.forEach((dep) => {\n\t\t\t\t    given_answers.forEach((answer) => {\n\t\t\t\t\t    if (dep === answer) {\n\t\t\t\t\t\t    ++met_deps;\n\t\t\t\t\t    }\n\t\t\t\t    });\n\t\t\t    });\n\n\t\t\t    if (0 < met_deps) {\n\t\t\t    \tif (question.operator && question.operator === 'or') {\n\t\t\t\t\t\tstep = next_step;\n\t\t\t    \t}\n\t\t\t    \tif (met_deps === deps.length) {\n\t\t\t\t\t\tstep = next_step;\n\t\t\t    \t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tnext_step++;\n\t\t}\n\n\t\tif (!step || step >= this.state.count) {\n\t\t\tstep = this.state.count;\n\t\t}\n\n\t\tres.step = step;\n\n\t\thistoryRecord(this, {\n\t\t\tstep: res.step,\n\t\t\tgiven_answers: res.given_answers\n\t\t});\n\t\tthis.setState(res);\n\t};\n\n\tfindScores = (scores, answers, first_answer) => {\n\t\tfor (let i = 0; i < answers.length; ++i) {\n\t\t\tlet a = answers[i];\n\t\t\tscores[ a.answer_id ] = Array.isArray(a.score) ? a.score[ first_answer ] : a.score;\n\t\t}\n\t\treturn scores;\n\t};\n\n\tcalcScore = (prelim_answers) => {\n\t\tif (!this.state.json) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet given_answers = prelim_answers || this.state.given_answers;\n\t\tlet questions = this.state.json.questions;\n\t\tlet scores = [];\n\t\tlet first_answer = given_answers[0] || 0;\n\t\tfor (let i = 0; i < questions.length; ++i) {\n\t\t\tlet q = questions[i];\n\t\t\tthis.findScores(scores, q.answers, first_answer);\n\t\t\tif (q.sub) {\n                q.sub.forEach((sub) => {\n\t\t\t\t    this.findScores(scores, sub.answers, first_answer);\n                });\n\t\t\t}\n\t\t}\n\t\tlet score = given_answers.reduce((sum, i) => sum + scores[i], 0);\n\t\treturn score;\n\t};\n\n\tgetResult = () => {\n\t\tvar score = this.calcScore();\n\t\tvar results = this.state.json.results;\n\t\tfor (var i = 0; i < results.length; ++i) {\n\t\t\tvar res = results[i];\n\t\t\tif (   (res.up_to && score < res.up_to)\n\t\t\t\t|| (res.in    && res.in.includes(score))\n\t\t\t\t|| (!res.in   && !res.up_to))\n\t\t\t{\n\t\t\t\treturn res;\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t};\n\n\tgoBack = () => historyGoBack(this);\n\n\tisDebugging = () => this.state.json !== undefined && this.state.json.debug\n\n\trender() {\n\t\tlet status_step = 0;\n\t\tif (this.state.step)\n\t\t\tstatus_step = (this.state.step >= this.state.count) ?\n\t\t\t\tthis.state.steps :\n\t\t\t\tthis.state.json.questions[this.state.step-1].step;\n\n\t\tif (this.isDebugging()) {\n\t\t\tconsole.group('Current state');\n\t\t\tconsole.log('History', this.state.history);\n\t\t\tconsole.log('Current score', this.calcScore());\n\t\t\tconsole.log('State', this.state);\n\t\t\tconsole.groupEnd('Current state');\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"test-wrapper\">\n\t\t\t\t{1 < this.state.step\n\t\t\t\t\t&& <div className=\"button-back\" onClick={this.goBack}>Tilbage</div>\n\t\t\t\t}\n\t\t\t\t<div className=\"test-wrapper-body\">\n\t\t\t\t\t{0 === this.state.step && !this.state.json &&\n\t\t\t\t\t\t<Loading key=\"loading\" />\n\t\t\t\t\t}\n\t\t\t\t\t{0 === this.state.step && this.state.json &&\n\t\t\t\t\t\t<TestIntro\n\t\t\t\t\t\t\tkey=\"testintro\"\n\t\t\t\t\t\t\tintro={this.state.json.intro}\n\t\t\t\t\t\t\tstart={this.startTest}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step && this.state.step >= this.state.count &&\n\t\t\t\t\t\t<Result\n\t\t\t\t\t\t\tkey=\"result\"\n\t\t\t\t\t\t\tresult={this.getResult()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step && this.state.step < this.state.count &&\n\t\t\t\t\t\t<Question\n\t\t\t\t\t\t    step={ this.state.step }\n\t\t\t\t\t\t\tkey={\"question\" + this.state.step}\n\t\t\t\t\t\t\tquestion={this.state.json.questions[this.state.step - 1]}\n\t\t\t\t\t\t\tgiven_answers={this.state.given_answers}\n\t\t\t\t\t\t\trecordAnswerAndStep={this.recordAnswerAndStep}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step &&\n\t\t\t\t\t\t<Status\n\t\t\t\t\t\t\tkey=\"status\"\n\t\t\t\t\t\t\tstep={status_step}\n\t\t\t\t\t\t\tcount={this.state.steps}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nDanmarkTesten.propTypes = {\n\tquiz: PropTypes.string,\n\tjson: PropTypes.object\n};\n\nexport default DanmarkTesten;\n","import 'react-app-polyfill/ie11'; // For IE 11 support\nimport 'core-js/es7/array'\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport DanmarkTesten from './DanmarkTesten';\n\nReactDOM.render(<DanmarkTesten quiz=\"danmark-testen\" />, document.getElementById('danmark-testen'));\n//ReactDOM.render(<DanmarkTesten quiz=\"boerne-testen\" />, document.getElementById('boerne-testen'));\n"],"sourceRoot":""}