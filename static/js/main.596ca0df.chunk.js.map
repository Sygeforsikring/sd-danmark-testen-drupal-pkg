{"version":3,"sources":["includes/constants.js","includes/history.js","helpers/siteImproveEventPush.js","AgeStep.js","ResultPage.js","DanmarkTesten.js","includes/common.js","index.js"],"names":["STATE_INITIAL","given_answers","step","history","STATE_TEST_STARTED","historyRecord","instance","score","calcScore","historyWithScore","isDebugging","property","console","group","log","groupEnd","setState","state","siteImproveEventPush","event","category","action","label","_sz","push","window","AgeStep","props","componentDidMount","handleChange","age","parseInt","target","value","showMessage","handleNext","answer","find","intervals","element","from","to","nextStep","id","answer_ids","answers","forEach","res","text","split","answer_id","map","a","buttonClass","this","className","htmlFor","name","type","onChange","onClick","message","renderHTML","Component","ResultPage","ref","current","querySelectorAll","link","addEventListener","componentWillUnmount","removeEventlistner","e","innerText","React","createRef","markup","axios","require","FadeTransition","extendedChildren","Children","children","child","cloneElement","Loading","TestIntro","intro","start","TestStep","info","answered","length","filteredAnswers","filter","undefined","includes","answers_for_this_question","question","key","bind","extra","Question","recordAnswerAndStep","add_answer","del_answers","Result","result","resultClass","html","Status","steps","i","count","classes","DanmarkTesten","quiz","startTest","next_step","json","questions","deps","depends","met_deps","dep","operator","findScores","scores","first_answer","Array","isArray","prelim_answers","q","sub","reduce","sum","getResult","results","up_to","in","goBack","pop","formerHistoryElement","historyElementWithoutScore","historyGoBack","debug","get","then","data","catch","warn","status_step","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.596ca0df.chunk.js","sourcesContent":["export const STATE_INITIAL = {\n  given_answers: [],\n  step: 0,\n  history: []\n}\n\nexport const STATE_TEST_STARTED = {\n  given_answers: [],\n  step: 1\n}\n","import { STATE_TEST_STARTED } from './constants'\n\nexport const historyRecord = (instance, history) => {\n  const score = instance.calcScore(history.given_answers)\n  // Add current score to history for debugging.\n  const historyWithScore = { ...history, ...{ score } }\n\n  if (instance.isDebugging()) {\n    console.group('historyRecord')\n    for (const property in historyWithScore) {\n      console.log(property, historyWithScore[property])\n    }\n    console.groupEnd('historyRecord')\n  }\n\n  // \"Record actions\" by adding element to history.\n  instance.setState({ history: [...instance.state.history, historyWithScore] })\n}\n\nexport const historyGoBack = (instance) => {\n  let history = [...instance.state.history]\n  // Skip last entry because we go back in time.\n  history.pop()\n  // If history is totally emptied\n  // make sure that its set to test start (step 1).\n  history = history.length ? history : STATE_TEST_STARTED\n  // Get last entry from history (which was the previous user choice).\n  const formerHistoryElement = history[history.length - 1]\n\n  if (instance.isDebugging()) {\n    console.group('historyGoBack')\n    for (const property in formerHistoryElement) {\n      console.log(property, formerHistoryElement[property])\n    }\n    console.groupEnd('historyGoBack')\n  }\n\n  // Delete score from state object.\n  // We dont want to set it in state\n  // since application handles that in calcScore().\n  const { score, ...historyElementWithoutScore } = formerHistoryElement\n\n  // Rewind both history and state to previous step.\n  instance.setState({ ...{ history }, ...historyElementWithoutScore })\n}\n","/* eslint-disable */ \nexport const siteImproveEventPush = (event, category, action, label) => {\n  if (typeof _sz === 'undefined') {\n    return;\n  }\n  \n  if (typeof _sz.push === 'function') {\n    _sz.push(['event', category, action, label]);\n    // TODO: Remove before releasing\n    window.console.log(`Siteimprove: ${label}`);\n  }\n  return event;\n};\n/* eslint-enable */","import React, { Component } from 'react';\nimport renderHTML from 'react-render-html';\nimport { find } from 'lodash';\nimport { siteImproveEventPush } from './helpers/siteImproveEventPush';\n\n//------------------- AgeStep ------------------------------\nexport class AgeStep extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n        let intervals = [];\n        props.answers.forEach(answer => {\n            let res = answer.text.split(\"-\");\n            intervals.push({\n                from: res[0],\n                to: res[1],\n                id: answer.answer_id\n            });\n        });\n        const answer_ids = props.answers.map((a) => a.answer_id);\n        this.state = { age: '', intervals, answer_ids, showMessage: false};\n  }\n  \n  componentDidMount = () => {\n    siteImproveEventPush(\n      null,\n      'danmark testen',\n      'Load Age step',\n      'User continued to age step'\n    )\n  }\n\n    handleChange = (event) => {\n        this.setState({\n            age: parseInt(event.target.value),\n            showMessage: false\n        });\n    };\n\n    handleNext = (event) => {\n        const age = this.state.age;\n        if (age < 16 || age > 59) {\n            this.setState({showMessage: true});\n            siteImproveEventPush(\n              null,\n              'danmark testen',\n              'Age input error',\n              'User gets an error on enter age step'\n            )\n            return;\n        }\n\n        let answer = find(this.state.intervals, function(element) {\n            return  age >= element.from && age <= element.to;\n        });\n\n        this.props.nextStep(answer.id, this.state.answer_ids);\n\n     };\n\n    render() {\n        const buttonClass = this.state.showMessage ? 'next disabled' : 'next';\n        return (\n            <div className=\"age-step\">\n                <label htmlFor=\"age\">Indtast alder:</label>\n                <input name=\"age\" type=\"number\" value={this.state.age} onChange={this.handleChange} />\n                <button className={buttonClass} onClick={this.handleNext}>Næste</button>\n                { this.state.showMessage && this.props.message &&\n                    <div className=\"message\">\n                    { renderHTML(this.props.message) }\n                    </div>\n                }\n            </div>\n        );\n\t}\n}\n","import React, { Component } from 'react';\nimport renderHTML from 'react-render-html';\nimport { siteImproveEventPush } from './helpers/siteImproveEventPush';\n\n//------------------- Result page ------------------------------\nexport class ResultPage extends Component {\n  constructor(props) {\n    super(props);\n    this.ref = React.createRef();\n  }\n  \n  componentDidMount = () => {\n    siteImproveEventPush(\n      null,\n      'danmark testen',\n      'Load resultpage',\n      `User loads resultpage for group: ${this.props.group}`\n    )\n\n    this.ref.current.querySelectorAll('a').forEach(link =>\n      link.addEventListener('click', this.onClick, false)\n    );\n  };\n\n  componentWillUnmount = () => {\n    this.ref.current.querySelectorAll('a').forEach(link =>\n      link.removeEventlistner('click', this.onClick, false)\n    );\n  }\n\n  onClick = (e) => {\n    const group = this.props.group;\n    const text = e.target.innerText;\n    siteImproveEventPush(\n      null,\n      'danmark testen',\n      `Click ${text}`,\n      `User clicked ${text} from resultpage for group: ${group}`\n    )\n  };\n\n  render() {\n    return (\n      <div className={this.props.className} ref={this.ref}>\n        {renderHTML(this.props.markup)}\n      </div>\n    );\n\t}\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport renderHTML from 'react-render-html';\nimport {filter, includes} from 'lodash';\nimport './main.css';\nimport { historyRecord, historyGoBack } from './includes/history';\nimport { jsonUrl } from './includes/common';\nimport { STATE_INITIAL, STATE_TEST_STARTED } from './includes/constants'\nimport { AgeStep } from './AgeStep';\nimport { ResultPage } from './ResultPage';\n\nvar axios = require('axios');\n\n//------------------- FadeTransition ------------------------------\nconst FadeTransition = (props) => {\n\tconst extendedChildren = React.Children.map(props.children, (child) => {\n    return child.props.className ? React.cloneElement(\n      child,\n      {\n        className: child.props.className + ' fade-in',\n      }\n    ) : child;\n  });\n\n\treturn (\n\t\t<div>\n\t\t\t{extendedChildren}\n\t\t</div>\n\t);\n}\nFadeTransition.propTypes = {\n};\n\n//------------------- Loading ------------------------------\n\nfunction Loading(props) {\n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t\t<p>Henter data...</p>\n\t\t</FadeTransition>\n\t);\n}\nLoading.propTypes = {\n};\n\n//------------------- TestIntro ------------------------------\n\nfunction TestIntro(props) {\n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t<div className=\"test-wrapper--intro\">\n\t\t\t<div className=\"test-wrapper--intro-illustration\" />\n\t\t\t{renderHTML(props.intro)}\n\t\t\t<button onClick={props.start}>Start testen</button>\n\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\nTestIntro.propTypes = {\n\tintro: PropTypes.string.isRequired,\n\tstart: PropTypes.func.isRequired\n};\n\n//------------------- TestStep ------------------------------\n\nfunction TestStep(props) {\n\tvar step = props.step;\n\tvar info = props.info;\n\tvar onClick = props.onClick;\n\tvar answered = props.answered;\n\n\tconst age = answered.length > 0 ? answered[0] : null;\n\tconst filteredAnswers = filter(info.answers, function(answer) {\n\t\treturn answer.age === undefined || answer.age === null || includes(answer.age, age);\n\t}, age);\n\n\tvar answers_for_this_question = filteredAnswers.map((a) => a.answer_id);\n\n\treturn (\n\t\t<div className=\"test-wrapper--step\">\n\t\t\t<h2>{info.question}</h2>\n\t\t\t{info.text && renderHTML(info.text)}\n\n\t\t\t{\n\t\t\t\tstep === 1 && <AgeStep answers={info.answers} nextStep={onClick} message={info.message}/>\n\t\t\t}\n\n\t\t\t{step > 1 && filteredAnswers.map(\n\t\t\t\t(answer) => {\n\t\t\t\t\tvar className;\n\t\t\t\t\tif (answered.includes(answer.answer_id)) className = \"active\";\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={answer.answer_id}>\n\t\t\t\t\t\t  <button className={className} onClick={onClick.bind(null,answer.answer_id, answers_for_this_question)}>{answer.text}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t)}\n\t\t\t{info.extra && renderHTML(info.extra)}\n\t\t</div>\n\t);\n}\nTestStep.propTypes = {\n\tinfo: PropTypes.object.isRequired,\n\tonClick: PropTypes.func.isRequired,\n\tanswered: PropTypes.array.isRequired\n};\n\n//------------------- Question ------------------------------\n\nfunction Question(props) {\n\tvar step          = props.step;\n\tvar question      = props.question;\n\tvar given_answers = props.given_answers;\n\tvar recordAnswerAndStep = props.recordAnswerAndStep;\n\tlet onClick       = (add_answer, del_answers) => {\n\t\trecordAnswerAndStep(add_answer, del_answers);\n\t};\n\n\treturn (\n    <FadeTransition {...props}>\n\t\t\t<div className=\"Question\">\n\t\t\t  <TestStep step={step} info={question} onClick={onClick} answered={given_answers}/>\n\t\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\n\nQuestion.propTypes = {\n\tquestion: PropTypes.object.isRequired,\n\tgiven_answers: PropTypes.array.isRequired,\n\trecordAnswerAndStep: PropTypes.func.isRequired,\n\tstep: PropTypes.number.isRequired\n};\n\n//------------------- Result ------------------------------\n\nfunction Result(props) {\n\tconst { result } = props;\n  const resultClass = `result result__group--${result.group}`;\n  \n\treturn (\n\t\t<FadeTransition {...props}>\n\t\t\t<div className=\"test-wrapper--result\">\n        <ResultPage className={resultClass} markup={result.html} group={result.group} />\n\t\t\t</div>\n\t\t</FadeTransition>\n\t);\n}\nResult.propTypes = {\n\tresult:  PropTypes.object.isRequired\n};\n\n//------------------- Status ------------------------------\n\nfunction Status(props) {\n\tvar steps = [];\n\tfor (let i = 0; i < props.count; ++i) {\n\t\tsteps[i] = \"\";\n\t}\n\tfor (let i = 0; i < props.step-1; ++i) {\n\t\tsteps[i] += 'seen ';\n\t}\n\tsteps[props.step  - 1] += 'active ';\n\tsteps[props.count - 1] += 'final ';\n\treturn (\n\t\t<ul className=\"test-wrapper--status\">\n\t\t\t{steps.map(function(classes,i) {\n\t\t\t\treturn (<li key={i} className={classes}><i></i></li>);\n\t\t\t})}\n\t\t</ul>\n\t);\n}\nStatus.propTypes = {\n\tstep:  PropTypes.number.isRequired,\n\tcount: PropTypes.number.isRequired\n};\n\n//------------------- DanmarkTesten ------------------------------\n\nclass DanmarkTesten extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tif (props.json) { // test inject\n\t\t\tthis.state = {\n\t\t\t\t...STATE_INITIAL,\n\t\t\t\t...{\n\t\t\t\t\tsteps: props.json.questions[props.json.questions.length - 1].step + 1,\n\t\t\t\t\tcount: props.json.questions.length + 1,\n\t\t\t\t\tjson: props.json,\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tthis.state = STATE_INITIAL;\n\n\t\t\taxios.get(jsonUrl(this.props.quiz)).then((res) => {\n\t\t\t\tvar json = res.data;\n\t\t\t\tthis.setState(() => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tsteps: json.questions[json.questions.length - 1].step+1,\n\t\t\t\t\t\tcount: json.questions.length + 1,\n\t\t\t\t\t\tjson:  json\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}).catch((e) => {\n\t\t\t\tif (console.warn) console.warn(e);\n\t\t\t});\n\n\t\t}\n\t}\n\n\tstartTest = () => {\n\t\tthis.setState(() => {\n\t\t\treturn { step: 1 };\n\t\t});\n\t\thistoryRecord(this, STATE_TEST_STARTED);\n\t};\n\n\trecordAnswerAndStep = (answer, del_answers) => {\n\t\tlet given_answers = this.state.given_answers.filter((e) => !del_answers.includes(e));\n\n\t\tgiven_answers.push(answer);\n\n\t\tlet res = { given_answers };\n\n\t\tif (this.calcScore(given_answers) < 0) {\n\t\t\tres.step = this.state.count;\n\n\t\t\thistoryRecord(this, {\n\t\t\t\tstep: res.step,\n\t\t\t\tgiven_answers: res.given_answers\n\t\t\t});\n\t\t\tthis.setState(res);\n\t\t\treturn;\n\t\t}\n\n\t\tlet step = 0;\n\n\t\tlet next_step = this.state.step + 1;\n\t\tif (next_step >= this.state.count) {\n\t\t\tstep = this.state.count;\n\t\t}\n\n\t\twhile(!step && next_step < this.state.count) {\n\t\t\tlet question = this.state.json.questions[next_step-1];\n\n\t\t\tlet deps = question.depends || [];\n\t\t\tif (!deps.length) {\n\t\t\t\tstep = next_step;\n\t\t\t} else {\n\t\t\t    let met_deps = 0;\n\t\t\t    deps.forEach((dep) => {\n\t\t\t\t    given_answers.forEach((answer) => {\n\t\t\t\t\t    if (dep === answer) {\n\t\t\t\t\t\t    ++met_deps;\n\t\t\t\t\t    }\n\t\t\t\t    });\n\t\t\t    });\n\n\t\t\t    if (0 < met_deps) {\n\t\t\t    \tif (question.operator && question.operator === 'or') {\n\t\t\t\t\t\tstep = next_step;\n\t\t\t    \t}\n\t\t\t    \tif (met_deps === deps.length) {\n\t\t\t\t\t\tstep = next_step;\n\t\t\t    \t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tnext_step++;\n\t\t}\n\n\t\tif (!step || step >= this.state.count) {\n\t\t\tstep = this.state.count;\n\t\t}\n\n\t\tres.step = step;\n\n\t\thistoryRecord(this, {\n\t\t\tstep: res.step,\n\t\t\tgiven_answers: res.given_answers\n\t\t});\n\t\tthis.setState(res);\n\t};\n\n\tfindScores = (scores, answers, first_answer) => {\n\t\tfor (let i = 0; i < answers.length; ++i) {\n\t\t\tlet a = answers[i];\n\t\t\tscores[ a.answer_id ] = Array.isArray(a.score) ? a.score[ first_answer ] : a.score;\n\t\t}\n\t\treturn scores;\n\t};\n\n\tcalcScore = (prelim_answers) => {\n\t\tif (!this.state.json) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet given_answers = prelim_answers || this.state.given_answers;\n\t\tlet questions = this.state.json.questions;\n\t\tlet scores = [];\n\t\tlet first_answer = given_answers[0] || 0;\n\t\tfor (let i = 0; i < questions.length; ++i) {\n\t\t\tlet q = questions[i];\n\t\t\tthis.findScores(scores, q.answers, first_answer);\n\t\t\tif (q.sub) {\n                q.sub.forEach((sub) => {\n\t\t\t\t    this.findScores(scores, sub.answers, first_answer);\n                });\n\t\t\t}\n\t\t}\n\t\tlet score = given_answers.reduce((sum, i) => sum + scores[i], 0);\n\t\treturn score;\n\t};\n\n\tgetResult = () => {\n\t\tvar score = this.calcScore();\n\t\tvar results = this.state.json.results;\n\t\tfor (var i = 0; i < results.length; ++i) {\n\t\t\tvar res = results[i];\n\t\t\tif (   (res.up_to && score < res.up_to)\n\t\t\t\t|| (res.in    && res.in.includes(score))\n\t\t\t\t|| (!res.in   && !res.up_to))\n\t\t\t{\n\t\t\t\treturn res;\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t};\n\n\tgoBack = () => historyGoBack(this);\n\n\tisDebugging = () => this.state.json !== undefined && this.state.json.debug\n\n\trender() {\n\t\tlet status_step = 0;\n\t\tif (this.state.step)\n\t\t\tstatus_step = (this.state.step >= this.state.count) ?\n\t\t\t\tthis.state.steps :\n\t\t\t\tthis.state.json.questions[this.state.step-1].step;\n\n\t\tif (this.isDebugging()) {\n\t\t\tconsole.group('Current state');\n\t\t\tconsole.log('History', this.state.history);\n\t\t\tconsole.log('Current score', this.calcScore());\n\t\t\tconsole.log('State', this.state);\n\t\t\tconsole.groupEnd('Current state');\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"test-wrapper\">\n\t\t\t\t{1 < this.state.step && this.state.step < this.state.count\n\t\t\t\t\t&& <div className=\"button-back\" onClick={this.goBack}>Tilbage</div>\n\t\t\t\t}\n\t\t\t\t<div className=\"test-wrapper-body\">\n\t\t\t\t\t{0 === this.state.step && !this.state.json &&\n\t\t\t\t\t\t<Loading key=\"loading\" />\n\t\t\t\t\t}\n\t\t\t\t\t{0 === this.state.step && this.state.json &&\n\t\t\t\t\t\t<TestIntro\n\t\t\t\t\t\t\tkey=\"testintro\"\n\t\t\t\t\t\t\tintro={this.state.json.intro}\n\t\t\t\t\t\t\tstart={this.startTest}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step && this.state.step >= this.state.count &&\n\t\t\t\t\t\t<Result\n\t\t\t\t\t\t\tkey=\"result\"\n\t\t\t\t\t\t\tresult={this.getResult()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step && this.state.step < this.state.count &&\n\t\t\t\t\t\t<Question\n\t\t\t\t\t\t    step={ this.state.step }\n\t\t\t\t\t\t\tkey={\"question\" + this.state.step}\n\t\t\t\t\t\t\tquestion={this.state.json.questions[this.state.step - 1]}\n\t\t\t\t\t\t\tgiven_answers={this.state.given_answers}\n\t\t\t\t\t\t\trecordAnswerAndStep={this.recordAnswerAndStep}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{0 < this.state.step &&\n\t\t\t\t\t\t<Status\n\t\t\t\t\t\t\tkey=\"status\"\n\t\t\t\t\t\t\tstep={status_step}\n\t\t\t\t\t\t\tcount={this.state.steps}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nDanmarkTesten.propTypes = {\n\tquiz: PropTypes.string,\n\tjson: PropTypes.object\n};\n\nexport default DanmarkTesten;\n","export const jsonUrl = (quiz) => {\n  switch (process.env.NODE_ENV) {\n    case 'development':\n      return `http://localhost:3000/${quiz}.json`\n\n    case 'production':\n    default:\n      return `/api/${quiz}`\n  }\n}\n","import 'react-app-polyfill/ie11'; // For IE 11 support\nimport 'core-js/es/array'\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport DanmarkTesten from './DanmarkTesten';\n\nReactDOM.render(<DanmarkTesten quiz=\"danmark-testen\" />, document.getElementById('danmark-testen'));\n"],"sourceRoot":""}